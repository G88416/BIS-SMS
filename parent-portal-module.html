<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Parent Portal Module - BIS-SMS</title>
  
  <!-- Firebase SDK -->
  <script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-analytics.js";
    
    // Your web app's Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyBsUOSF5eENLCq_4fH9lLx_WIVUa6QDeBE",
      authDomain: "bis-management-system-d77f4.firebaseapp.com",
      projectId: "bis-management-system-d77f4",
      storageBucket: "bis-management-system-d77f4.firebasestorage.app",
      messagingSenderId: "724917351295",
      appId: "1:724917351295:web:d87a2da7979babda08e04a",
      measurementId: "G-NQKBSS701Y"
    };
    
    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    
    // Initialize Analytics with error handling
    let analytics = null;
    try {
      analytics = getAnalytics(app);
    } catch (error) {
      console.warn('Firebase Analytics could not be initialized:', error);
    }
    
    // Make available globally
    window.firebaseApp = app;
    window.firebaseAnalytics = analytics;
  </script>
  
  <!-- Bootstrap 5 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  
  <!-- Font Awesome for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  
  <style>
    :root {
      --primary: #28a745;
      --light-bg: #f8f9fa;
    }
    
    body {
      background-color: var(--light-bg);
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    
    .card {
      border: none;
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.06);
      margin-bottom: 1.5rem;
    }
    
    .stat-icon {
      font-size: 2.2rem;
      opacity: 0.9;
    }
    
    .badge-status {
      padding: 0.5rem 1rem;
      font-size: 0.875rem;
    }
    
    @media print {
      .no-print {
        display: none !important;
      }
      body {
        background: white;
      }
    }
  </style>
</head>
<body>

<div class="container-fluid py-4">
  <!-- Module Title -->
  <div class="row mb-4">
    <div class="col-12">
      <h2 class="text-center mb-4">
        <i class="fas fa-user-friends text-primary"></i> 
        Interactive Parent Portal Module
      </h2>
      <p class="text-center text-muted">
        Complete copy-paste ready module with all requested features
      </p>
    </div>
  </div>

  <!-- Parent Portal Section START -->
  <div id="parent-portal-module">
    
    <!-- Welcome Header -->
    <div class="row mb-4">
      <div class="col-12">
        <div class="card">
          <div class="card-body d-flex justify-content-between align-items-center">
            <div>
              <h4 class="mb-1">Welcome, Parent of <span id="parent-student-name">John Doe</span></h4>
              <p class="text-muted mb-0">Grade <span id="parent-student-grade">10</span> • Student ID: <span id="parent-student-id">1</span> • School Location: Johannesburg</p>
            </div>
            <button class="btn btn-outline-danger btn-sm no-print" onclick="parentLogout()">
              <i class="fas fa-sign-out-alt"></i> Logout
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Quick Stats Row -->
    <div class="row g-4 mb-5">
      <div class="col-md-3 col-sm-6">
        <div class="card text-center h-100">
          <div class="card-body">
            <i class="fas fa-graduation-cap text-primary stat-icon"></i>
            <h6 class="mt-2">Average Grade</h6>
            <h4 id="parent-avg-grade">75.5%</h4>
          </div>
        </div>
      </div>
      <div class="col-md-3 col-sm-6">
        <div class="card text-center h-100">
          <div class="card-body">
            <i class="fas fa-calendar-check text-success stat-icon"></i>
            <h6 class="mt-2">Attendance Rate</h6>
            <h4 id="parent-attendance-rate">92.3%</h4>
          </div>
        </div>
      </div>
      <div class="col-md-3 col-sm-6">
        <div class="card text-center h-100">
          <div class="card-body">
            <i class="fas fa-tasks text-info stat-icon"></i>
            <h6 class="mt-2">Pending Homework</h6>
            <h4 id="parent-pending-homework">3</h4>
          </div>
        </div>
      </div>
      <div class="col-md-3 col-sm-6">
        <div class="card text-center h-100">
          <div class="card-body">
            <i class="fas fa-file-invoice-dollar text-warning stat-icon"></i>
            <h6 class="mt-2">Fee Balance (ZAR)</h6>
            <h4 id="parent-fee-balance">R2,500</h4>
          </div>
        </div>
      </div>
    </div>
