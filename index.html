<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Comprehensive HRMS - Allos Connect (Sage-inspired)</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mammoth@1.4.2/mammoth.browser.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <style>
        body { font-family: 'Poppins', sans-serif; background-color: #f0f8ff; color: #333; box-shadow: 0 0 20px #4169E1; }
        .sidebar { background-color: #e6f3ff; border-right: 1px solid #87ceeb; height: 100vh; position: fixed; width: 250px; padding: 20px; overflow-y: auto; transition: width 0.3s ease; z-index: 1000; box-shadow: 0 0 20px #4169E1; }
        .sidebar.collapsed { width: 60px; }
        .sidebar.collapsed .nav-text { display: none; }
        .sidebar .nav-link { color: #001f3f; font-weight: 500; margin-bottom: 10px; padding: 10px; transition: all 0.2s; }
        .sidebar .nav-link:hover { color: #4169e1; background-color: #add8e6; border-radius: 5px; }
        .sidebar .nav-link.active { color: #4169e1; background-color: #b0e0e6; border-radius: 5px; }
        .content { margin-left: 250px; padding: 40px; transition: margin-left 0.3s ease; background-color: #f8fbff; box-shadow: 0 0 20px #4169E1; }
        .content.expanded { margin-left: 60px; }
        .card-metric { background-color: #ffffff; border: 1px solid #add8e6; box-shadow: 0 4px 15px rgba(135,206,235,0.2), 0 0 10px #4169E1; border-radius: 10px; transition: transform 0.2s; }
        .card-metric:hover { transform: translateY(-5px); }
        .table { background-color: #ffffff; box-shadow: 0 2px 10px rgba(135,206,235,0.1), 0 0 10px #4169E1; border-radius: 10px; overflow: hidden; border: 1px solid #e6f3ff; }
        .modal-content { border-radius: 15px; box-shadow: 0 5px 20px rgba(65,105,225,0.2), 0 0 10px #4169E1; border: 1px solid #add8e6; }
        .btn-toggle-sidebar { position: fixed; top: 20px; left: 260px; z-index: 1001; transition: left 0.3s ease; background-color: #4169e1; border-color: #4169e1; }
        .btn-toggle-sidebar.expanded { left: 70px; }
        #notificationBell { position: fixed; top: 20px; right: 20px; z-index: 1100; }
        .admin-only { display: block; }
        .employee-only { display: none; }
        .dark-mode { background-color: #001f3f; color: #e0e0e0; }
        .dark-mode .sidebar { background-color: #0d1b2a; border-right: 1px solid #4169e1; }
        .dark-mode .nav-link { color: #add8e6; }
        .dark-mode .nav-link:hover { color: #ffffff; background-color: #4169e1; }
        .dark-mode .content { background-color: #001f3f; }
        .dark-mode .card-metric { background-color: #0d1b2a; border: 1px solid #4169e1; }
        .dark-mode .table { background-color: #0d1b2a; color: #e0e0e0; border: 1px solid #add8e6; }
        .dark-mode .table-striped tbody tr:nth-of-type(odd) { background-color: #1a2b4a; }
        .dark-mode .table thead th { background-color: #4169e1; color: white; }
        @media (max-width: 768px) {
            .sidebar { width: 60px; }
            .sidebar .nav-text { display: none; }
            .content { margin-left: 60px; }
            .btn-toggle-sidebar { left: 70px; }
        }
        /* Login Page Styles */
        .login-page { min-height: 100vh; display: flex; align-items: center; justify-content: center; background: linear-gradient(135deg, #4169e1, #87ceeb); }
        .login-card { width: 100%; max-width: 420px; padding: 2rem; border-radius: 15px; box-shadow: 0 10px 30px rgba(65,105,225,0.3); background: white; }
        .login-title { font-weight: 700; color: #4169e1; }
        .login-demo { font-size: 0.85rem; color: #666; }
        .payslip-preview { display: none; }
        .payslip-header { background-color: #4169e1; color: white; padding: 1rem; text-align: center; }
        .payslip-body { padding: 1rem; }
        .payslip-footer { border-top: 1px solid #ddd; padding: 1rem; text-align: center; font-size: 0.8rem; }
        /* make audit table scrollable on small screens */
        #audit .table { max-height: 60vh; overflow-y: auto; display: block; }
        #pdfCanvas { max-width: 100%; height: auto; }
        /* Wellness Module Styles */
        .wellness-progress { background-color: #e9ecef; border-radius: 10px; height: 20px; overflow: hidden; }
        .wellness-progress-bar { height: 100%; background: linear-gradient(90deg, #28a745, #ffc107, #fd7e14); transition: width 0.3s ease; }
        .wellness-card { border-left: 4px solid #28a745; }
        .survey-question { margin-bottom: 1rem; }
        .resource-card { transition: transform 0.2s; }
        .resource-card:hover { transform: translateY(-2px); }
        /* Advanced Payroll Styles */
        .payroll-run-card { background: linear-gradient(135deg, #4169e1, #87ceeb); color: white; }
        .earnings-breakdown { background-color: #f8f9fa; padding: 15px; border-radius: 8px; margin-top: 10px; }
        .deduction-item { display: flex; justify-content: space-between; margin-bottom: 5px; }
        .payroll-summary { font-size: 1.1em; font-weight: bold; }
        .tax-compliance-alert { background-color: #fff3cd; border: 1px solid #ffeaa7; padding: 10px; border-radius: 5px; margin-top: 10px; }
        .interactive-payroll { transition: all 0.3s ease; }
        .interactive-payroll:hover { box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
    </style>
</head>
<body>
    <!-- Login Page -->
    <div id="loginPage" class="login-page">
        <div class="login-card">
            <div class="text-center mb-4">
                <i class="fas fa-users fa-3x text-primary mb-3"></i>
                <h3 class="login-title">HRMS - Allos Connect</h3>
                <p class="text-muted">Sign in to access your dashboard</p>
            </div>
            <form id="loginForm" onsubmit="event.preventDefault(); login();">
                <div class="mb-3">
                    <label class="form-label">Username</label>
                    <input type="text" id="username" class="form-control" placeholder="Enter username" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">Password</label>
                    <input type="password" id="password" class="form-control" placeholder="Enter password" required>
                </div>
                <button type="submit" class="btn btn-primary w-100 mb-3">
                    <i class="fas fa-sign-in-alt me-2"></i>Login
                </button>
                <div class="login-demo">
                    <p class="mb-1"><strong>Admin:</strong> admin / admin123</p>
                    <p class="mb-0"><strong>Employee:</strong> john / john123</p>
                </div>
            </form>
            <button type="button" class="btn btn-outline-primary w-100" data-bs-toggle="modal" data-bs-target="#onboardingModal">
                New Employee? Start Onboarding
            </button>
        </div>
    </div>
    <!-- Main App (Hidden until login) -->
    <div class="app-container" id="appContainer" style="display:none;">
        <!-- Notification Bell -->
        <div id="notificationBell">
            <button class="btn btn-primary rounded-circle shadow" style="width:50px;height:50px;" data-bs-toggle="modal" data-bs-target="#notificationsModal">
                <i class="fas fa-bell fa-lg"></i>
                <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger" id="notificationBadge" style="display:none;">0</span>
            </button>
        </div>
        <button class="btn btn-sm btn-primary btn-toggle-sidebar" onclick="toggleSidebar()"><i class="fas fa-bars"></i></button>
        <div class="sidebar">
            <h4 class="mb-4"><i class="fas fa-users me-2"></i><span class="nav-text">HRMS - Allos Connect</span></h4>
            <ul class="nav flex-column">
                <li class="admin-only"><a href="#dashboard" class="nav-link active" onclick="showSection('dashboard')"><i class="fas fa-tachometer-alt me-2"></i><span class="nav-text">HR Analytics Dashboard</span></a></li>
                <li class="employee-only"><a href="#myDashboard" class="nav-link" onclick="showSection('myDashboard')"><i class="fas fa-tachometer-alt me-2"></i><span class="nav-text">My Dashboard</span></a></li>
                <li class="admin-only"><a href="#employees" class="nav-link" onclick="showSection('employees')"><i class="fas fa-user-friends me-2"></i><span class="nav-text">Employees (HR Core)</span></a></li>
                <li class="employee-only"><a href="#myProfile" class="nav-link" onclick="showSection('myProfile')"><i class="fas fa-user me-2"></i><span class="nav-text">My Profile</span></a></li>
                <li class="employee-only"><a href="#handbook" class="nav-link" onclick="showSection('handbook')"><i class="fas fa-book me-2"></i><span class="nav-text">Employee Handbook</span></a></li>
                <li class="admin-only"><a href="#payroll" class="nav-link" onclick="showSection('payroll')"><i class="fas fa-money-check-alt me-2"></i><span class="nav-text">Advanced Payroll</span></a></li>
                <li class="employee-only"><a href="#myPayroll" class="nav-link" onclick="showSection('myPayroll')"><i class="fas fa-money-bill-wave me-2"></i><span class="nav-text">My Payslips</span></a></li>
                <li class="admin-only"><a href="#recruitment" class="nav-link" onclick="showSection('recruitment')"><i class="fas fa-briefcase me-2"></i><span class="nav-text">iRecruit</span></a></li>
                <li class="employee-only"><a href="#openJobs" class="nav-link" onclick="showSection('openJobs')"><i class="fas fa-briefcase me-2"></i><span class="nav-text">Job Openings</span></a></li>
                <li><a href="#performance" class="nav-link" onclick="showSection('performance')"><i class="fas fa-chart-line me-2"></i><span class="nav-text">Performance</span></a></li>
                <li><a href="#attendance" class="nav-link" onclick="showSection('attendance')"><i class="fas fa-clock me-2"></i><span class="nav-text">Time & Attendance</span></a></li>
                <li><a href="#leaves" class="nav-link" onclick="showSection('leaves')"><i class="fas fa-calendar-alt me-2"></i><span class="nav-text">Leaves</span></a></li>
                <li class="admin-only"><a href="#benefits" class="nav-link" onclick="showSection('benefits')"><i class="fas fa-gift me-2"></i><span class="nav-text">Benefits Admin</span></a></li>
                <li class="employee-only"><a href="#myBenefits" class="nav-link" onclick="showSection('myBenefits')"><i class="fas fa-gift me-2"></i><span class="nav-text">My Benefits</span></a></li>
                <li class="admin-only"><a href="#training" class="nav-link" onclick="showSection('training')"><i class="fas fa-graduation-cap me-2"></i><span class="nav-text">Training Admin</span></a></li>
                <li class="employee-only"><a href="#myTraining" class="nav-link" onclick="showSection('myTraining')"><i class="fas fa-graduation-cap me-2"></i><span class="nav-text">My Training</span></a></li>
                <li class="admin-only"><a href="#compliance" class="nav-link" onclick="showSection('compliance')"><i class="fas fa-balance-scale me-2"></i><span class="nav-text">Compliance</span></a></li>
                <li class="admin-only"><a href="#reports" class="nav-link" onclick="showSection('reports')"><i class="fas fa-file-alt me-2"></i><span class="nav-text">My Workforce Analyzer</span></a></li>
                <li class="admin-only"><a href="#settings" class="nav-link" onclick="showSection('settings')"><i class="fas fa-cog me-2"></i><span class="nav-text">Settings</span></a></li>
                <li class="admin-only"><a href="#audit" class="nav-link" onclick="showSection('audit')"><i class="fas fa-history me-2"></i><span class="nav-text">Payroll Audit Trail</span></a></li>
                <li class="admin-only"><a href="#mediaApproval" class="nav-link" onclick="showSection('mediaApproval')"><i class="fas fa-check-circle me-2"></i><span class="nav-text">Media Approval</span></a></li>
                <!-- New Wellness Links -->
                <li class="admin-only"><a href="#wellnessAdmin" class="nav-link" onclick="showSection('wellnessAdmin')"><i class="fas fa-heartbeat me-2"></i><span class="nav-text">Wellness Admin</span></a></li>
                <li class="employee-only"><a href="#myWellness" class="nav-link" onclick="showSection('myWellness')"><i class="fas fa-heartbeat me-2"></i><span class="nav-text">My Wellness</span></a></li>
                <!-- New Sage-inspired Employee Features -->
                <li class="employee-only"><a href="#myClaims" class="nav-link" onclick="showSection('myClaims')"><i class="fas fa-file-invoice me-2"></i><span class="nav-text">My Claims</span></a></li>
                <li class="employee-only"><a href="#myTimeEntry" class="nav-link" onclick="showSection('myTimeEntry')"><i class="fas fa-clock me-2"></i><span class="nav-text">My Time Entry</span></a></li>
                <li class="employee-only"><a href="#inbox" class="nav-link" onclick="showSection('inbox')"><i class="fas fa-inbox me-2"></i><span class="nav-text">Inbox</span></a></li>
                <li><a href="#" class="nav-link text-danger" onclick="logout()"><i class="fas fa-sign-out-alt me-2"></i><span class="nav-text">Logout</span></a></li>
            </ul>
        </div>
        <div class="content">
            <!-- Dashboard (HR Analytics) -->
            <section id="dashboard" class="section">
                <h2>HR Analytics Dashboard</h2>
                <div class="row mt-4">
                    <div class="col-md-3"><div class="card card-metric p-3"><h5>Total Employees</h5><h3 id="totalEmployees">0</h3></div></div>
                    <div class="col-md-3"><div class="card card-metric p-3"><h5>Open Positions</h5><h3 id="openPositions">0</h3></div></div>
                    <div class="col-md-3"><div class="card card-metric p-3"><h5>Avg Performance</h5><h3 id="avgPerformance">0/5</h3></div></div>
                    <div class="col-md-3"><div class="card card-metric p-3"><h5>Pending Leaves</h5><h3 id="pendingLeaves">0</h3></div></div>
                    <div class="col-md-3"><div class="card card-metric p-3 bg-primary text-white"><h5>Compliance Score</h5><h3 id="complianceScore">0%</h3></div></div>
                    <div class="col-md-3"><div class="card card-metric p-3"><h5>Expiring Certs</h5><h3 id="expiringCerts">0</h3></div></div>
                    <div class="col-md-3"><div class="card card-metric p-3"><h5>Total Payroll Cost</h5><h3 id="totalPayrollCost">R0</h3></div></div>
                    <div class="col-md-3"><div class="card card-metric p-3"><h5>Avg Salary</h5><h3 id="avgSalary">R0</h3></div></div>
                </div>
                <canvas id="dashboardChart" class="mt-4"></canvas>
            </section>
            <!-- Enhanced Employee Dashboard -->
            <section id="myDashboard" class="section d-none">
                <h2>Welcome, <span id="myName"></span></h2>
                <div class="row mt-4">
                    <div class="col-md-3 col-sm-6 mb-3"><div class="card card-metric p-3"><h5>Recent Payslips</h5><p id="recentPayslips">No recent payslips</p></div></div>
                    <div class="col-md-3 col-sm-6 mb-3"><div class="card card-metric p-3"><h5>Upcoming Leaves</h5><h3 id="upcomingLeaves">0</h3></div></div>
                    <div class="col-md-3 col-sm-6 mb-3"><div class="card card-metric p-3"><h5>Performance Rating</h5><h3 id="myAvgPerformance">0/5</h3></div></div>
                    <div class="col-md-3 col-sm-6 mb-3"><div class="card card-metric p-3"><h5>Pending Tasks</h5><h3 id="pendingTasks">0</h3></div></div>
                </div>
                <div class="row mt-4">
                    <div class="col-md-6"><canvas id="myPerformanceChart" height="200"></canvas></div>
                    <div class="col-md-6"><canvas id="myLeaveChart" height="200"></canvas></div>
                </div>
            </section>
            <!-- Employees Section (Restructured for BCC Sync) -->
            <section id="employees" class="section d-none">
                <h2>Employee Management (HR Core) - BCC Staff Integrated</h2>
                <button class="btn btn-primary" onclick="showAddEmployeeModal()">Add Employee</button>
                <div class="table-responsive mt-3">
                    <table class="table table-striped">
                        <thead><tr>
                            <th>ID</th><th>Name</th><th>Post Level</th><th>Position</th><th>Branch</th><th>Status</th><th>ID No.</th><th>Cell Phone</th><th>Email</th><th>Tax #</th><th>Bank ACC</th><th>Address</th><th>Salary</th><th>UIF #</th><th>Actions</th>
                        </tr></thead>
                        <tbody id="employeeTable"></tbody>
                    </table>
                </div>
            </section>
            <!-- Handbook Section -->
            <section id="handbook" class="section d-none">
                <h2>Employee Handbook</h2>
                <div id="handbookViewer" class="mb-3"></div>
                <button class="btn btn-primary admin-only" onclick="showUploadHandbookModal()">Upload New Handbook</button>
            </section>
            <!-- Advanced Payroll Section -->
            <section id="payroll" class="section d-none">
                <h2>Advanced Payroll Management (Tax Compliant)</h2>
                <div class="row mb-4">
                    <div class="col-md-4">
                        <div class="card payroll-run-card p-3 interactive-payroll">
                            <h5>Run Payroll</h5>
                            <select id="batchPeriod" class="form-control mb-2" onchange="previewBatchPayroll()">
                                <option value="">Select Period</option>
                                <option value="2025-11">November 2025</option>
                            </select>
                            <button class="btn btn-light" onclick="runBatchPayroll()">Process Batch Payroll</button>
                            <div id="batchPreview" class="mt-2" style="display:none;"></div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card card-metric p-3">
                            <h5>Pending Runs</h5>
                            <h3 id="pendingPayrollRuns">0</h3>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card card-metric p-3">
                            <h5>Total YTD Payroll</h5>
                            <h3 id="ytdPayroll">R0</h3>
                        </div>
                    </div>
                </div>
                <button class="btn btn-primary me-2" onclick="showAddPayrollModal()">Add Individual Entry</button>
                <button class="btn btn-secondary me-2" onclick="generatePayrollReport()">Generate Report</button>
                <button class="btn btn-info" onclick="exportPayrollToSARS()">Export to SARS (EMP201)</button>
                <div id="taxComplianceAlert" class="tax-compliance-alert" style="display:none;"></div>
                <table class="table table-striped mt-3">
                    <thead><tr><th>ID</th><th>Employee</th><th>Period</th><th>Gross Earnings</th><th>Total Deductions</th><th>Net Pay</th><th>Status</th><th>Tax Compliance</th><th>Actions</th></tr></thead>
                    <tbody id="payrollTable"></tbody>
                </table>
                <div id="payrollSummary" class="payroll-summary mt-3"></div>
                <canvas id="payrollTrendChart" class="mt-4" style="max-height: 300px;"></canvas>
            </section>
            <!-- Recruitment Section -->
            <section id="recruitment" class="section d-none">
                <h2>iRecruit</h2>
                <button class="btn btn-primary" onclick="showAddJobModal()">Add Job</button>
                <table class="table table-striped mt-3">
                    <thead><tr><th>ID</th><th>Title</th><th>Branch</th><th>Applications</th><th>Actions</th></tr></thead>
                    <tbody id="jobTable"></tbody>
                </table>
            </section>
            <!-- Performance Section -->
            <section id="performance" class="section d-none">
                <h2>Performance</h2>
                <button class="btn btn-primary admin-only" onclick="showAddReviewModal()">Add Review</button>
                <table class="table table-striped mt-3">
                    <thead><tr><th>Employee</th><th>Date</th><th>Score</th><th>Comments</th><th class="admin-only">Actions</th></tr></thead>
                    <tbody id="performanceTable"></tbody>
                </table>
            </section>
            <!-- Attendance Section -->
            <section id="attendance" class="section d-none">
                <h2>Time & Attendance</h2>
                <button class="btn btn-primary" onclick="clockIn()">Clock In</button>
                <table class="table table-striped mt-3">
                    <thead><tr><th>Employee</th><th>Date</th><th>Hours</th><th>Overtime</th><th>Status</th><th class="admin-only">Actions</th></tr></thead>
                    <tbody id="attendanceTable"></tbody>
                </table>
            </section>
            <!-- Leaves Section -->
            <section id="leaves" class="section d-none">
                <h2>Leaves</h2>
                <button class="btn btn-primary" onclick="showAddLeaveModal()">Request Leave</button>
                <table class="table table-striped mt-3">
                    <thead><tr><th>Employee</th><th>Start Date</th><th>End Date</th><th>Type</th><th>Status</th><th>Actions</th></tr></thead>
                    <tbody id="leavesTable"></tbody>
                </table>
            </section>
            <!-- Benefits Admin -->
            <section id="benefits" class="section d-none">
                <h2>Benefits Admin</h2>
                <button class="btn btn-primary" onclick="showAddBenefitModal()">Add Benefit Plan</button>
                <table class="table table-striped mt-3">
                    <thead><tr><th>ID</th><th>Name</th><th>Description</th><th>Cost</th><th>Actions</th></tr></thead>
                    <tbody id="benefitTable"></tbody>
                </table>
            </section>
            <!-- Training Admin -->
            <section id="training" class="section d-none">
                <h2>Training Admin</h2>
                <button class="btn btn-primary" onclick="showAddCourseModal()">Add Course</button>
                <table class="table table-striped mt-3">
                    <thead><tr><th>ID</th><th>Name</th><th>Description</th><th>Actions</th></tr></thead>
                    <tbody id="courseTable"></tbody>
                </table>
            </section>
            <!-- Compliance Section -->
            <section id="compliance" class="section d-none">
                <h2>Compliance</h2>
                <button class="btn btn-primary" onclick="showAddCertificationModal()">Add Certification</button>
                <table class="table table-striped mt-3">
                    <thead><tr><th>Employee</th><th>Name</th><th>Expiry Date</th><th>Actions</th></tr></thead>
                    <tbody id="certificationTable"></tbody>
                </table>
            </section>
            <!-- Reports (My Workforce Analyzer) -->
            <section id="reports" class="section d-none">
                <h2>My Workforce Analyzer</h2>
                <button class="btn btn-primary me-2" onclick="exportToExcel(employees, 'employees')">Export Employees</button>
                <button class="btn btn-primary me-2" onclick="exportToExcel(payrolls, 'payrolls')">Export Payrolls</button>
                <button class="btn btn-primary me-2" onclick="exportToExcel(leaves, 'leaves')">Export Leaves</button>
                <button class="btn btn-primary" onclick="exportToExcel(reviews, 'performance')">Export Performance</button>
                <button class="btn btn-success" onclick="exportWellnessReport()">Export Wellness</button>
            </section>
            <!-- Settings -->
            <section id="settings" class="section d-none">
                <h2>Settings</h2>
                <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="darkModeSwitch" onchange="toggleDarkMode(this.checked)">
                    <label class="form-check-label" for="darkModeSwitch">Dark Mode</label>
                </div>
                <div class="mt-3">
                    <h5>Payroll Settings</h5>
                    <label class="form-label">Pay Frequency</label>
                    <select id="payFrequency" class="form-control" onchange="saveSettings()">
                        <option value="monthly">Monthly</option>
                        <option value="biweekly">Bi-weekly</option>
                    </select>
                    <label class="form-label mt-3">Tax Year Start</label>
                    <input type="date" id="taxYearStart" class="form-control" value="2025-03-01" onchange="saveSettings()">
                </div>
            </section>
            <!-- Media Approval Workflow -->
            <section id="mediaApproval" class="section d-none">
                <h2>Media Content Approval</h2>
                <button class="btn btn-primary" onclick="showUploadMediaModal()">Upload Media for Approval</button>
                <table class="table table-striped mt-3">
                    <thead><tr><th>ID</th><th>Title</th><th>Uploader</th><th>Status</th><th>Actions</th></tr></thead>
                    <tbody id="mediaTable"></tbody>
                </table>
            </section>
            <!-- ==== AUDIT TRAIL SECTION (Admin only) ==== -->
            <section id="audit" class="section d-none">
                <h2>Payroll Audit Trail</h2>
                <table class="table table-striped mt-3">
                    <thead><tr><th>Time</th><th>User</th><th>Action</th><th>Details</th></tr></thead>
                    <tbody id="auditTable"></tbody>
                </table>
            </section>
            <!-- ==== MY PROFILE (Employee) ==== -->
            <section id="myProfile" class="section d-none">
                <h2>My Profile â€“ <span id="profileName"></span></h2>
                <div class="text-center mb-4">
                    <img id="profilePic" src="" alt="Profile Picture" class="rounded-circle img-thumbnail" style="width: 150px; height: 150px;">
                </div>
                <div id="profileDetails"></div>
            </section>
            <!-- My Payslips Section -->
            <section id="myPayroll" class="section d-none">
                <h2>My Payslips</h2>
                <table class="table table-striped mt-3">
                    <thead><tr><th>Period</th><th>Gross</th><th>Deductions</th><th>Net</th><th>Actions</th></tr></thead>
                    <tbody id="myPayrollTable"></tbody>
                </table>
            </section>
            <!-- Open Jobs Section -->
            <section id="openJobs" class="section d-none">
                <h2>Job Openings</h2>
                <table class="table table-striped mt-3">
                    <thead><tr><th>Title</th><th>Branch</th><th>Description</th><th>Status</th><th>Actions</th></tr></thead>
                    <tbody id="openJobTable"></tbody>
                </table>
            </section>
            <!-- Add Employee Modal (Restructured for BCC Sync) -->
            <div class="modal fade" id="addEmployeeModal" tabindex="-1">
                <div class="modal-dialog modal-xl">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title">Add/Edit Employee (BCC Sync)</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                        </div>
                        <div class="modal-body">
                            <form id="employeeForm">
                                <div class="row">
                                    <div class="col-md-6">
                                        <label class="form-label">Name</label>
                                        <input type="text" class="form-control" id="empName">
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">Post Level</label>
                                        <input type="text" class="form-control" id="postLevel">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <label class="form-label">Position</label>
                                        <input type="text" class="form-control" id="empPosition">
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">Perm/Temp</label>
                                        <select class="form-control" id="permTemp">
                                            <option value="Perm">Perm</option>
                                            <option value="Temp">Temp</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <label class="form-label">Branch/Location</label>
                                        <input type="text" class="form-control" id="empBranch">
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">Status</label>
                                        <select class="form-control" id="empStatus">
                                            <option value="Open">Open</option>
                                            <option value="Closed">Closed</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <label class="form-label">ID No.</label>
                                        <input type="text" class="form-control" id="idNo">
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">Cell Phone No.</label>
                                        <input type="text" class="form-control" id="cellPhone">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <label class="form-label">Birthdate</label>
                                        <input type="text" class="form-control" id="birthdate">
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">D.O.E</label>
                                        <input type="text" class="form-control" id="doe">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <label class="form-label">Income Tax No.</label>
                                        <input type="text" class="form-control" id="taxNumber">
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">Salary</label>
                                        <input type="number" class="form-control" id="salary">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <label class="form-label">Email Address</label>
                                        <input type="email" class="form-control" id="email">
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">UIF #</label>
                                        <input type="text" class="form-control" id="uifNumber">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <label class="form-label">Bank ACC No.</label>
                                        <input type="text" class="form-control" id="bankAccNo">
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">Address</label>
                                        <textarea class="form-control" id="address" rows="2"></textarea>
                                    </div>
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                            <button type="button" class="btn btn-primary" onclick="saveEmployee()">Save Employee</button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Other Modals (basic placeholders) -->
            <div class="modal fade" id="onboardingModal" tabindex="-1">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title">Onboarding</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                        </div>
                        <div class="modal-body">
                            <p>Onboarding form placeholder.</p>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal fade" id="notificationsModal" tabindex="-1">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title">Notifications</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                        </div>
                        <div class="modal-body">
                            <ul id="notificationList"></ul>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Add more modals as needed for other sections -->
        </div>
    </div>
    <script>
        // BCC Staff Data Integration (full parsed data)
        let bccEmployees = [
  {
    "name": "MRS MPUMELELO NKOSI",
    "postLevel": "P4",
    "position": "Executive Member",
    "permTemp": "Perm",
    "branch": "Mamelodi School ",
    "status": "Open",
    "idNo": "9010170454086",
    "cellPhone": "637726226",
    "birthdate": "33163",
    "doe": "16/oct/2023",
    "taxNumber": "1145072177",
    "email": "",
    "bankAccNo": "FNB 62779359366",
    "address": "15805 nguni str mamelodi pretoria 0122",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "MR BILLY RAKGWALE",
    "postLevel": "P3",
    "position": "Admin Staff",
    "permTemp": "Temp",
    "branch": "Mamelodi School ",
    "status": "Closed",
    "idNo": "7207235738098",
    "cellPhone": "",
    "birthdate": "26503",
    "doe": "01/03/2007",
    "taxNumber": "674015268",
    "email": "",
    "bankAccNo": "Capitec 1118424512",
    "address": "11217 Mamelodi East",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "MR TITUS SITHOLE",
    "postLevel": "P4",
    "position": "Executive Member",
    "permTemp": "Perm",
    "branch": "Mamelodi School ",
    "status": "Closed",
    "idNo": "6209075843087",
    "cellPhone": "824575744",
    "birthdate": "23627",
    "doe": "01/09/2008",
    "taxNumber": "",
    "email": "tituss@lantic.net",
    "bankAccNo": "FNB 62008573934",
    "address": "25409/78 Sebaka-borena str ext 4 Mamelodi East",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "MR JOSEPH MOKWEBO",
    "postLevel": "P0",
    "position": "General Staff",
    "permTemp": "Perm",
    "branch": "Mamelodi School ",
    "status": "Closed",
    "idNo": "6504235662082",
    "cellPhone": "715580119\u202c",
    "birthdate": "4/23/1065",
    "doe": "01/10/2008",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "MR GOODNESS SITHOLE",
    "postLevel": "P4",
    "position": "Executive Member",
    "permTemp": "Perm",
    "branch": "Mamelodi School ",
    "status": "Closed",
    "idNo": "8804165351088",
    "cellPhone": "678568249",
    "birthdate": "16/4/199",
    "doe": "",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "MR ANDRIES SEBOLA",
    "postLevel": "P0",
    "position": "General Staff",
    "permTemp": "Perm",
    "branch": "Mamelodi School ",
    "status": "Closed",
    "idNo": "7202255797081",
    "cellPhone": "721996888",
    "birthdate": "25/02/1972",
    "doe": "2011",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "3420 section k mamelodi west",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "MISS MIKATEKO BENEDICTINE CHAUKE",
    "postLevel": "P0",
    "position": "General Staff",
    "permTemp": "Perm",
    "branch": "Mamelodi School ",
    "status": "Closed",
    "idNo": "83083110442081",
    "cellPhone": "825395099",
    "birthdate": "31/08/1983",
    "doe": "24/08/2015",
    "taxNumber": "",
    "email": "mikatekobmaluleke@gmail.com",
    "bankAccNo": "",
    "address": "",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "MRS SARAH RAMUSHE",
    "postLevel": "P0",
    "position": "Admin Staff",
    "permTemp": "Perm",
    "branch": "Mamelodi School ",
    "status": "Closed",
    "idNo": "6701220573080",
    "cellPhone": "764828576",
    "birthdate": "24494",
    "doe": "",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "22450 mamelodi east ext 4 sebaka borena str",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "MISS THILIVHALI REMBULUWANI",
    "postLevel": "P0",
    "position": "Admin Staff",
    "permTemp": "Perm",
    "branch": "Mamelodi School ",
    "status": "Closed",
    "idNo": "9209220823080",
    "cellPhone": "725090753",
    "birthdate": "33656",
    "doe": "04/04/2017",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "NDB 1146384742",
    "address": "29080 Dilankulu str ext 5",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "MISS NOMVULA MASEKO",
    "postLevel": "P0",
    "position": "Admin Staff",
    "permTemp": "Perm",
    "branch": "Mamelodi School ",
    "status": "Closed",
    "idNo": "6911110538081",
    "cellPhone": "827489937",
    "birthdate": "25518",
    "doe": "2004",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "26131 aseletho str mamelodi, Pretoria 0122",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "MISS KEDIBONE CHAUKE",
    "postLevel": "P0",
    "position": "General Staff",
    "permTemp": "Perm",
    "branch": "Mamelodi School ",
    "status": "Closed",
    "idNo": "7612130568087",
    "cellPhone": "827204266",
    "birthdate": "28107",
    "doe": "02/02/2007",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "Capitec 1632721501",
    "address": "29076 dilankilu str ext 5 memelodi east",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "MRS FLORENCE NCUBE",
    "postLevel": "P2",
    "position": "HOD",
    "permTemp": "Perm",
    "branch": "Mamelodi School ",
    "status": "Closed",
    "idNo": "6805180880185",
    "cellPhone": "732597838",
    "birthdate": "24976",
    "doe": "30",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "MR CAURAGE MAUYA",
    "postLevel": "P1",
    "position": "Educator",
    "permTemp": "Perm",
    "branch": "Mamelodi School ",
    "status": "Open",
    "idNo": "",
    "cellPhone": "714025057",
    "birthdate": "34341",
    "doe": "15/sep/2023",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "FNB 63063968673",
    "address": "35545 masehle crescent",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "MISS SANNAH BOITUMELO MALEKA",
    "postLevel": "P1",
    "position": "Educator",
    "permTemp": "Perm",
    "branch": "Mamelodi School ",
    "status": "Closed",
    "idNo": "8706080679081",
    "cellPhone": "",
    "birthdate": "31936",
    "doe": "11/oct/2023",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "Capitec 1267510941",
    "address": "7436 seeping str section M west",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "MR LUCKY MALULEKA",
    "postLevel": "P1",
    "position": "Educator",
    "permTemp": "Perm",
    "branch": "Mamelodi School ",
    "status": "Open",
    "idNo": "9911305879081",
    "cellPhone": "765952813",
    "birthdate": "36494",
    "doe": "13/feb",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "ABSA 9265757699",
    "address": "1720 setlhong str",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "MR JACOB LEDWABA",
    "postLevel": "P2",
    "position": "HOD",
    "permTemp": "Perm",
    "branch": "Mamelodi School ",
    "status": "Closed",
    "idNo": "65122005403080",
    "cellPhone": "824935584",
    "birthdate": "24096",
    "doe": "01/02/2024",
    "taxNumber": "0300458149",
    "email": "",
    "bankAccNo": "ABSA 4083936523",
    "address": "285 willow park manar ,anmani estate",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "MISS NTHABISENG LIZBETH TSUMA",
    "postLevel": "P1",
    "position": "Educator",
    "permTemp": "Perm",
    "branch": "Mamelodi School ",
    "status": "Open",
    "idNo": "9302160291085",
    "cellPhone": "794700260",
    "birthdate": "34016",
    "doe": "12/02/2024",
    "taxNumber": "0016753287",
    "email": "nthabylee16@gmail.com",
    "bankAccNo": "SDB 101811300775",
    "address": "PHL 562 Tsamaya road mamelodi east",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "MISS GONTSE TSHILOANE",
    "postLevel": "P1",
    "position": "Educator",
    "permTemp": "Perm",
    "branch": "Mamelodi School ",
    "status": "Closed",
    "idNo": "9712190985086",
    "cellPhone": "798171794",
    "birthdate": "35783",
    "doe": "26/04/2024",
    "taxNumber": "0209441294",
    "email": "",
    "bankAccNo": "Capitec 1509612031",
    "address": "29602 nkwe str mamelodi east 0122",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "MRS NTOMBIFUTHI PHYLLIS NTHOLE",
    "postLevel": "P1",
    "position": "Educator",
    "permTemp": "Perm",
    "branch": "Mamelodi School ",
    "status": "Closed",
    "idNo": "4111397081",
    "cellPhone": "798265435",
    "birthdate": "36627",
    "doe": "",
    "taxNumber": "1558091193",
    "email": "",
    "bankAccNo": "Capitec 1592620408",
    "address": "16215 jakaranda",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "MR DAMEON HYKES",
    "postLevel": "P3",
    "position": "Principal",
    "permTemp": "Perm",
    "branch": "Mamelodi School ",
    "status": "Closed",
    "idNo": "86033005127089",
    "cellPhone": "607246159",
    "birthdate": "30/03/1986",
    "doe": "07/02/2023",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "Capitec 1356162965",
    "address": "63 lammer vangere eastlynne",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "DIMAKATSO MAHLANGU",
    "postLevel": "P0",
    "position": "General Staff",
    "permTemp": "Perm",
    "branch": "Mamelodi School ",
    "status": "Closed",
    "idNo": "7109050715087",
    "cellPhone": "789960351",
    "birthdate": "35678",
    "doe": "/03/2015",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "NDB 1120732719",
    "address": "",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "MRS NAPE EUNICE MATULUDI",
    "postLevel": "P1",
    "position": "Educator",
    "permTemp": "Perm",
    "branch": "Mamelodi School ",
    "status": "Closed",
    "idNo": "7009190518088",
    "cellPhone": "782747804",
    "birthdate": "25830",
    "doe": "",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "36344 lehong street ext 22 mamelodi east 0122",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "MRS INGRID TAU",
    "postLevel": "P0",
    "position": "General Staff",
    "permTemp": "Perm",
    "branch": "Mamelodi School ",
    "status": "Closed",
    "idNo": "6805051438089",
    "cellPhone": "726645979",
    "birthdate": "68/05/05",
    "doe": "09/09/2024",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "FNB 62136257278",
    "address": "22010 mamelodi East ikageng",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Surprise Sebothoma",
    "postLevel": "P1",
    "position": "Educator",
    "permTemp": "Temp",
    "branch": "Mamelodi School ",
    "status": "Open",
    "idNo": "",
    "cellPhone": "",
    "birthdate": "",
    "doe": "",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "MR KHUTSO MOGANE",
    "postLevel": "P1",
    "position": "Educator",
    "permTemp": "Perm",
    "branch": "Mamelodi School ",
    "status": "Closed",
    "idNo": "9502275950083",
    "cellPhone": "813332394",
    "birthdate": "27/02/1995",
    "doe": "",
    "taxNumber": "1706824180",
    "email": "",
    "bankAccNo": "Capitec 1696125500",
    "address": "",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "MISS BABE SEDILE MOSUWE",
    "postLevel": "P4",
    "position": "Executive Member",
    "permTemp": "Perm",
    "branch": "Mhlanga School",
    "status": "Closed",
    "idNo": "6601190702083",
    "cellPhone": "835573049",
    "birthdate": "24126",
    "doe": "01/02/2023",
    "taxNumber": "",
    "email": "bmosuwe3@gmail.com",
    "bankAccNo": "Capitec 1221063640",
    "address": "1166 mohatjane str Britz",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "SS SITHOLE",
    "postLevel": "P4",
    "position": "Executive Member",
    "permTemp": "Temp",
    "branch": "Mhlanga School",
    "status": "Closed",
    "idNo": "9608240840083",
    "cellPhone": "629662339",
    "birthdate": "35301",
    "doe": "05/01/2018",
    "taxNumber": "1902483187",
    "email": "surelysithole41@gmail.com",
    "bankAccNo": "Tymebank 51029195078",
    "address": "Plot 74 Jakalasdans Pretoria",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "M NKOSI",
    "postLevel": "P4",
    "position": "Executive Member",
    "permTemp": "Perm",
    "branch": "Mhlanga School",
    "status": "Closed",
    "idNo": "9010170454086",
    "cellPhone": "637726226",
    "birthdate": "33163",
    "doe": "16/10/2023",
    "taxNumber": "1145072177",
    "email": "",
    "bankAccNo": "FNB 62779359366",
    "address": "15805 nguni str mamelodi pretoria 0122",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "TA MGUNI",
    "postLevel": "P2",
    "position": "HOD",
    "permTemp": "Perm",
    "branch": "Mhlanga School",
    "status": "Closed",
    "idNo": "6411290300089",
    "cellPhone": "764518560",
    "birthdate": "23710",
    "doe": "23/08/2019",
    "taxNumber": "",
    "email": "thembanganithubana@gmail.com",
    "bankAccNo": "Standard Bank 10116303369",
    "address": "1313 Tweefontein Ext K ",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "SM NGWENYAMA",
    "postLevel": "P1",
    "position": "Educator",
    "permTemp": "Perm",
    "branch": "Mhlanga School",
    "status": "Closed",
    "idNo": "AE107400",
    "cellPhone": "655375508",
    "birthdate": "21262",
    "doe": "10/2018",
    "taxNumber": "0762495182",
    "email": "ndukwana17@gmail.com ",
    "bankAccNo": "Capitec 1436713410",
    "address": "732 Tweefontein J ",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "GT MOKWENA",
    "postLevel": "P3",
    "position": "Principal",
    "permTemp": "Perm",
    "branch": "Mhlanga School",
    "status": "Closed",
    "idNo": "6702155727089",
    "cellPhone": "766177925",
    "birthdate": "24518",
    "doe": "01/2016",
    "taxNumber": "1222155648",
    "email": "lakamokoena@gmail.com",
    "bankAccNo": "Capitec 1167141459",
    "address": "264 Simunye Str Section C Kwa-Mhlanga ",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "SM TSHABANGU",
    "postLevel": "P2",
    "position": "HOD",
    "permTemp": "Perm",
    "branch": "Mhlanga School",
    "status": "Closed",
    "idNo": "6610106184088",
    "cellPhone": "24390",
    "birthdate": "24390",
    "doe": "11/01/2017",
    "taxNumber": "1506289147",
    "email": "samsonmtshabangu@gmail.com",
    "bankAccNo": "Capitec 1116371365",
    "address": "43 Tswelopele st Kwamhlanga Section C",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "BI MAKUVAZA",
    "postLevel": "P2",
    "position": "HOD",
    "permTemp": "Perm",
    "branch": "Mhlanga School",
    "status": "Closed",
    "idNo": "GN461080",
    "cellPhone": "612320338",
    "birthdate": "24494",
    "doe": "22/05/2018",
    "taxNumber": "1177084231",
    "email": "beautymakuvaza@gmail.com",
    "bankAccNo": "FNB 62789688515",
    "address": "4232 Phola Park",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "S DHLADHLA",
    "postLevel": "P2",
    "position": "HOD",
    "permTemp": "Perm",
    "branch": "Mhlanga School",
    "status": "Closed",
    "idNo": "9702055812087",
    "cellPhone": "769131733",
    "birthdate": "35552",
    "doe": "18/08/2024",
    "taxNumber": "0386158265",
    "email": "Siyabongadhladhla8024@gmail.com ",
    "bankAccNo": "",
    "address": "290 Phola Park",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "JN SITHOLE",
    "postLevel": "P1",
    "position": "Educator",
    "permTemp": "Perm",
    "branch": "Mhlanga School",
    "status": "Closed",
    "idNo": "6710075654085",
    "cellPhone": "606110242",
    "birthdate": "24663",
    "doe": "06/01/2022",
    "taxNumber": "97437276",
    "email": "",
    "bankAccNo": "Capitec 1624113441",
    "address": "Stand No93 Empumelelweni Kwamhlanga",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "K J PHETLA",
    "postLevel": "P0",
    "position": "Genera",
    "permTemp": "",
    "branch": "Mhlanga School",
    "status": "",
    "idNo": "",
    "cellPhone": "",
    "birthdate": "",
    "doe": "",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "P MAPHEELLE",
    "postLevel": "P0",
    "position": "Educator",
    "permTemp": "Perm",
    "branch": "Mhlanga School",
    "status": "Open",
    "idNo": "8307030538087",
    "cellPhone": "",
    "birthdate": "30382",
    "doe": "08/08/2024",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "4477 Phola Park",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "TI MALAPANE",
    "postLevel": "P1",
    "position": "HOD",
    "permTemp": "Perm",
    "branch": "Mhlanga School",
    "status": "Closed",
    "idNo": "9707250060085",
    "cellPhone": "769131733",
    "birthdate": "35636",
    "doe": "02/02/2024",
    "taxNumber": "0304925272",
    "email": "thabangrighteous25@gmail.com",
    "bankAccNo": "Capitec 1523294971",
    "address": "425 Kwa-Mhlanga Section B ",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "GN SIBANDA",
    "postLevel": "P1",
    "position": "Educator",
    "permTemp": "Perm",
    "branch": "Mhlanga School",
    "status": "Open",
    "idNo": "9007010730021",
    "cellPhone": "789123478",
    "birthdate": "32880",
    "doe": "22/04/2024",
    "taxNumber": "0269380283",
    "email": "marhadebe632@gmail.com ",
    "bankAccNo": "Capitec 171234818",
    "address": "1753 Thembalethu",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "N MSIZA",
    "postLevel": "P1",
    "position": "Educator",
    "permTemp": "Perm",
    "branch": "Mhlanga School",
    "status": "Closed",
    "idNo": "9003120281089",
    "cellPhone": "762149126",
    "birthdate": "33210",
    "doe": "21/01/2021",
    "taxNumber": "3517279174",
    "email": "unathimsiza901@gmail.com",
    "bankAccNo": "Capitec 1573033020",
    "address": "Tweekfontein",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "T SHABANGU",
    "postLevel": "P1",
    "position": "Educator",
    "permTemp": "Perm",
    "branch": "Mhlanga School",
    "status": "Closed",
    "idNo": "7005060464080",
    "cellPhone": "765620640",
    "birthdate": "28981",
    "doe": "",
    "taxNumber": "",
    "email": "shabangutc681@gmail.com",
    "bankAccNo": "Capitec 1210008015",
    "address": "HO 11 Chris Hani Kwa-Mhlanga",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "MB MASEKO",
    "postLevel": "P1",
    "position": "Principal",
    "permTemp": "Perm",
    "branch": "Mhlanga School",
    "status": "Closed",
    "idNo": "9403285845084",
    "cellPhone": "786934289",
    "birthdate": "34421",
    "doe": "24/01/2024",
    "taxNumber": "0364413294",
    "email": "masekoblessingm@gmail.com",
    "bankAccNo": "Capitec 1600203378",
    "address": "867 Tweefontein B2 Kwa-Mhlanga",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "W MAHLANGU",
    "postLevel": "P0",
    "position": "General Staff",
    "permTemp": "Perm",
    "branch": "Mhlanga School",
    "status": "Closed",
    "idNo": "9605270158089",
    "cellPhone": "",
    "birthdate": "35212",
    "doe": "07/2023",
    "taxNumber": "3382385171",
    "email": "",
    "bankAccNo": "",
    "address": "818 Vlaklaagte",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "P  MAHLANGU ",
    "postLevel": "P1",
    "position": "Educator",
    "permTemp": "Perm",
    "branch": "Mhlanga School",
    "status": "Closed",
    "idNo": "6912130692080",
    "cellPhone": "796640115",
    "birthdate": "25550",
    "doe": "02/05/2017",
    "taxNumber": "1238589244",
    "email": "magundiprecious@gmail.com",
    "bankAccNo": "",
    "address": "1132 Moloto City",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "I NTHLEBI ",
    "postLevel": "P1",
    "position": "General Staff ",
    "permTemp": "Perm",
    "branch": "Mhlanga School",
    "status": "Closed",
    "idNo": "",
    "cellPhone": "",
    "birthdate": "",
    "doe": "",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "GR SEBOLAI ",
    "postLevel": "P1",
    "position": "Educator",
    "permTemp": "Temp",
    "branch": "Mhlanga School",
    "status": "Open",
    "idNo": "9902265608083",
    "cellPhone": "",
    "birthdate": "28912",
    "doe": "05/05/2025",
    "taxNumber": "2454507142",
    "email": "",
    "bankAccNo": "",
    "address": "991 Thembalethu",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "HP GUMA ",
    "postLevel": "P0",
    "position": "General Staff ",
    "permTemp": "Perm",
    "branch": "Mhlanga School",
    "status": "Closed",
    "idNo": "9504140100084",
    "cellPhone": "765889430",
    "birthdate": "34803",
    "doe": "09/01/2023",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "Capitec 1754869686",
    "address": "1987 Buhlesizwe No.2 Kwa-Mhlanga ",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "LS KGOSANA",
    "postLevel": "P1",
    "position": "Educator",
    "permTemp": "Temp",
    "branch": "Mhlanga School",
    "status": "Closed",
    "idNo": "8902070314082",
    "cellPhone": "710214229",
    "birthdate": "32546",
    "doe": "13/06/25",
    "taxNumber": "1464390184",
    "email": "lebogangphurave@gmail.com",
    "bankAccNo": "Capitec 1474900303",
    "address": "4158 Phola Park ",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "JH Maluleka ",
    "postLevel": "P1",
    "position": "Educator",
    "permTemp": "Temp",
    "branch": "Mhlanga School",
    "status": "Closed",
    "idNo": "5802255802088",
    "cellPhone": "725509680",
    "birthdate": "21241",
    "doe": "13/05/2025",
    "taxNumber": "0843009697",
    "email": "malulekejohannes85@gmail.com",
    "bankAccNo": "Capitec 1135758415</SHEET>",
    "address": "375 Bankview Kwa-Mhlanga ",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Elizabeth MB Mokgwetsi ",
    "postLevel": "P3",
    "position": "Principal",
    "permTemp": "Perm",
    "branch": "pre-school",
    "status": "Closed",
    "idNo": "",
    "cellPhone": "691401131",
    "birthdate": "34952",
    "doe": "22/02/2025",
    "taxNumber": "",
    "email": "no.9",
    "bankAccNo": "",
    "address": "Cullinan ",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Maria T Manyaola",
    "postLevel": "P2",
    "position": "Educator",
    "permTemp": "Perm",
    "branch": "pre-school",
    "status": "Closed",
    "idNo": "",
    "cellPhone": "733042789",
    "birthdate": "26556",
    "doe": "01/01/2020",
    "taxNumber": "",
    "email": "Kerk Street",
    "bankAccNo": "",
    "address": "17034",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Lydia R Ramone",
    "postLevel": "P0",
    "position": "General Staff",
    "permTemp": "Perm",
    "branch": "pre-school",
    "status": "Closed",
    "idNo": "",
    "cellPhone": "712799123",
    "birthdate": "26473",
    "doe": "01/15/2020",
    "taxNumber": "",
    "email": "Ext.4 . Mamelodi East",
    "bankAccNo": "",
    "address": "29206",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Mr. Vincent Ndlovu",
    "postLevel": "P4",
    "position": "Manager",
    "permTemp": "Perm",
    "branch": "Childrens Home ",
    "status": "Mamelodi",
    "idNo": "",
    "cellPhone": "",
    "birthdate": "",
    "doe": "",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Ms. Lilian Malehase",
    "postLevel": "P3",
    "position": "Social Worker",
    "permTemp": "Perm",
    "branch": "Childrens Home ",
    "status": "Mamelodi",
    "idNo": "",
    "cellPhone": "",
    "birthdate": "",
    "doe": "",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Ms. Cynthia Mabena",
    "postLevel": "P2",
    "position": "Admin Staff",
    "permTemp": "Perm",
    "branch": "Childrens Home ",
    "status": "Mamelodi",
    "idNo": "",
    "cellPhone": "",
    "birthdate": "",
    "doe": "",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Ms. Nurse Netshilulu",
    "postLevel": "P2",
    "position": "Caregiver",
    "permTemp": "Perm",
    "branch": "Childrens Home ",
    "status": "Mamelodi",
    "idNo": "",
    "cellPhone": "",
    "birthdate": "",
    "doe": "",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Ms. Linah Maponya",
    "postLevel": "P1",
    "position": "Caregiver",
    "permTemp": "Perm",
    "branch": "Childrens Home ",
    "status": "Mamelodi",
    "idNo": "",
    "cellPhone": "",
    "birthdate": "",
    "doe": "",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Ms. Maria Phora",
    "postLevel": "P1",
    "position": "Caregiver",
    "permTemp": "Perm",
    "branch": "Childrens Home ",
    "status": "Mamelodi",
    "idNo": "",
    "cellPhone": "",
    "birthdate": "",
    "doe": "",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Ms. Dudu Dhludhlu",
    "postLevel": "P1",
    "position": "Caregiver",
    "permTemp": "Perm",
    "branch": "Childrens Home ",
    "status": "Mamelodi",
    "idNo": "",
    "cellPhone": "",
    "birthdate": "",
    "doe": "",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Ms. Nomsa Chiloane",
    "postLevel": "P1",
    "position": "Caregiver",
    "permTemp": "Perm",
    "branch": "Childrens Home ",
    "status": "Mamelodi",
    "idNo": "",
    "cellPhone": "",
    "birthdate": "",
    "doe": "",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Ms. Mirriam Dhlamini",
    "postLevel": "P0",
    "position": "General Staff",
    "permTemp": "Perm",
    "branch": "Childrens Home ",
    "status": "Mamelodi",
    "idNo": "",
    "cellPhone": "",
    "birthdate": "",
    "doe": "",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Ms. Pule Ratsela",
    "postLevel": "P0",
    "position": "General Staff",
    "permTemp": "Perm",
    "branch": "Childrens Home ",
    "status": "Mamelodi",
    "idNo": "",
    "cellPhone": "",
    "birthdate": "",
    "doe": "",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Mr. Jan Masimini",
    "postLevel": "P0",
    "position": "General Staff",
    "permTemp": "Perm",
    "branch": "Childrens Home ",
    "status": "Mamelodi",
    "idNo": "",
    "cellPhone": "",
    "birthdate": "",
    "doe": "",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Mr. Godfrey Sekgodiso",
    "postLevel": "P0",
    "position": "General Staff",
    "permTemp": "Perm",
    "branch": "Childrens Home ",
    "status": "Mamelodi",
    "idNo": "",
    "cellPhone": "",
    "birthdate": "",
    "doe": "",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Mr. Albert Ndou",
    "postLevel": "P0",
    "position": "General Staff",
    "permTemp": "Perm",
    "branch": "Childrens Home ",
    "status": "Mamelodi",
    "idNo": "",
    "cellPhone": "",
    "birthdate": "",
    "doe": "",
    "taxNumber": "",
    "email": "</SHEET>",
    "bankAccNo": "",
    "address": "",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Tebogo Theledi",
    "postLevel": "",
    "position": "Manager",
    "permTemp": "Perm",
    "branch": "Old Age ",
    "status": "Closed",
    "idNo": "",
    "cellPhone": "633342100",
    "birthdate": "19/09/1982",
    "doe": "17 March 2023",
    "taxNumber": "",
    "email": "managetheledi@gmail.com",
    "bankAccNo": "",
    "address": "A 3198 Phomolong M/E",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Lebogang Malebane",
    "postLevel": "",
    "position": "Administrator",
    "permTemp": "contract",
    "branch": "Old Age ",
    "status": "",
    "idNo": "",
    "cellPhone": "799896250",
    "birthdate": "14/07/1981",
    "doe": "01 April 2020",
    "taxNumber": "",
    "email": "mosalebogang@outlook.com",
    "bankAccNo": "",
    "address": "20166 Bufferzone M/E",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Cynthia Motuba",
    "postLevel": "",
    "position": "Professional Nurse",
    "permTemp": "Contract",
    "branch": "Old Age ",
    "status": "",
    "idNo": "",
    "cellPhone": "798092241",
    "birthdate": "18112",
    "doe": "01 June 2019",
    "taxNumber": "",
    "email": "N/A",
    "bankAccNo": "",
    "address": "19529 Molepo Street M/E",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Bontle Mashimbi",
    "postLevel": "",
    "position": "Care Giver",
    "permTemp": "Contract",
    "branch": "Old Age ",
    "status": "",
    "idNo": "",
    "cellPhone": "678492234",
    "birthdate": "28/01/1996",
    "doe": "11 November 2022",
    "taxNumber": "",
    "email": "bontlebontlenyana316@gmail.com",
    "bankAccNo": "",
    "address": "34648 Restant V D Dorp Ext 6 M/E",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Takalani Netshimboni",
    "postLevel": "",
    "position": "Care Giver",
    "permTemp": "Contract",
    "branch": "Old Age ",
    "status": "",
    "idNo": "",
    "cellPhone": "713428426",
    "birthdate": "28765",
    "doe": "06 May 2015",
    "taxNumber": "",
    "email": "N/A",
    "bankAccNo": "",
    "address": "20820 Bufferzone     M/E",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Audrey Kgang",
    "postLevel": "",
    "position": "Care Giver",
    "permTemp": "Contract",
    "branch": "Old Age ",
    "status": "",
    "idNo": "",
    "cellPhone": "822393764",
    "birthdate": "14/10/1976",
    "doe": "27 February 2017",
    "taxNumber": "",
    "email": "N/A",
    "bankAccNo": "",
    "address": "16339 Didimala Street M/E",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Mpho Siliga",
    "postLevel": "",
    "position": "Care Giver",
    "permTemp": "Contract",
    "branch": "Old Age ",
    "status": "",
    "idNo": "",
    "cellPhone": "760353493",
    "birthdate": "29957",
    "doe": "15 August 2015",
    "taxNumber": "",
    "email": "mphosiliga08@gmail.com",
    "bankAccNo": "",
    "address": "17028 Kerk Street M/E",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Belina Khulong",
    "postLevel": "",
    "position": "Care Giver",
    "permTemp": "Contract",
    "branch": "Old Age ",
    "status": "",
    "idNo": "",
    "cellPhone": "762210720",
    "birthdate": "25/06/1971",
    "doe": "27 September 2021",
    "taxNumber": "",
    "email": "N/A",
    "bankAccNo": "",
    "address": "3606 Mahube Valley Ext 3 M/E",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Tiny Kgoahla",
    "postLevel": "",
    "position": "Care Giver",
    "permTemp": "Contract",
    "branch": "Old Age ",
    "status": "",
    "idNo": "",
    "cellPhone": "721883868",
    "birthdate": "28465",
    "doe": "04 January 2023",
    "taxNumber": "",
    "email": "tinykgoahla@gmail.com",
    "bankAccNo": "",
    "address": "36367 Lehong Street Ext 22 M/E",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Betty Makola",
    "postLevel": "",
    "position": "Care Giver",
    "permTemp": "Contract",
    "branch": "Old Age ",
    "status": "",
    "idNo": "",
    "cellPhone": "765915497",
    "birthdate": "23/12/1972",
    "doe": "06 August 2021",
    "taxNumber": "",
    "email": "N/A",
    "bankAccNo": "",
    "address": "AL-1130 Alaska M/E",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Lillian Kekana",
    "postLevel": "",
    "position": "Care Giver",
    "permTemp": "Contract",
    "branch": "Old Age ",
    "status": "",
    "idNo": "",
    "cellPhone": "728993839",
    "birthdate": "31/05/1961",
    "doe": "26 May 2025",
    "taxNumber": "",
    "email": "lilliankekana@gmail.com",
    "bankAccNo": "",
    "address": "20365 Bufferzone M/E",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Zilda Cossa",
    "postLevel": "",
    "position": "Cleaner",
    "permTemp": "Contract",
    "branch": "Old Age ",
    "status": "",
    "idNo": "",
    "cellPhone": "721549812",
    "birthdate": "30563",
    "doe": "01 September 2020",
    "taxNumber": "",
    "email": "N/A",
    "bankAccNo": "",
    "address": "29192 Rhulani Street Ext 5",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Bridget Neganda",
    "postLevel": "",
    "position": "Manager",
    "permTemp": "Perm",
    "branch": "Mental&Disability ",
    "status": "",
    "idNo": "",
    "cellPhone": "785070271",
    "birthdate": "20/09/1979",
    "doe": "12/02/2009",
    "taxNumber": "",
    "email": "bneganda79@gmail",
    "bankAccNo": "",
    "address": "23146 Moba Str. Ext 4",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Maria Nkgapelo",
    "postLevel": "",
    "position": "Enrolled Nurse",
    "permTemp": "Perm",
    "branch": "Mental&Disability ",
    "status": "",
    "idNo": "",
    "cellPhone": "721988642",
    "birthdate": "25/12/1952",
    "doe": "01/11/2015",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "19853 Eagle Str Khutsong",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Reneilwe Makwela",
    "postLevel": "",
    "position": "Admistrator",
    "permTemp": "Perm",
    "branch": "Mental&Disability ",
    "status": "",
    "idNo": "",
    "cellPhone": "760617643",
    "birthdate": "22/01/1995",
    "doe": "01/01/2021",
    "taxNumber": "",
    "email": "irenemakwela27@gmail",
    "bankAccNo": "",
    "address": "109 Mahube Valley Ext 2",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Sannie Molehe",
    "postLevel": "",
    "position": "Caregiver",
    "permTemp": "Perm",
    "branch": "Mental&Disability ",
    "status": "",
    "idNo": "",
    "cellPhone": "647450406",
    "birthdate": "",
    "doe": "",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Elizabeth Chauke",
    "postLevel": "",
    "position": "Caregiver",
    "permTemp": "Perm",
    "branch": "Mental&Disability ",
    "status": "",
    "idNo": "",
    "cellPhone": "795929430",
    "birthdate": "",
    "doe": "",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Lebogang Maapola",
    "postLevel": "",
    "position": "Caregiver",
    "permTemp": "Perm",
    "branch": "Mental&Disability ",
    "status": "",
    "idNo": "",
    "cellPhone": "794782989",
    "birthdate": "08/091990",
    "doe": "01/04/2021",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "6592 Dthabaneng sec. Hamm",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Ipeleng Moeketsane",
    "postLevel": "",
    "position": "Caregiver",
    "permTemp": "Perm",
    "branch": "Mental&Disability ",
    "status": "",
    "idNo": "",
    "cellPhone": "835371875",
    "birthdate": "",
    "doe": "",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Paulina Maloka",
    "postLevel": "",
    "position": "Caregiver",
    "permTemp": "Perm",
    "branch": "Mental&Disability ",
    "status": "",
    "idNo": "",
    "cellPhone": "713939592",
    "birthdate": "",
    "doe": "",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Joyce Mabaso",
    "postLevel": "",
    "position": "Caregiver",
    "permTemp": "Perm",
    "branch": "Mental&Disability ",
    "status": "",
    "idNo": "",
    "cellPhone": "721201346",
    "birthdate": "25455",
    "doe": "01/04/2020",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "2811 Rebisi Str. Ext 5",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Sonia Mantshidi",
    "postLevel": "",
    "position": "Caregiver",
    "permTemp": "Perm",
    "branch": "Mental&Disability ",
    "status": "",
    "idNo": "",
    "cellPhone": "796595669",
    "birthdate": "19/03/1991",
    "doe": "24/05/2018",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "8850 Platinum Str. Nelmapius 7",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Letta Lukhele",
    "postLevel": "",
    "position": "Caregiver",
    "permTemp": "Perm",
    "branch": "Mental&Disability ",
    "status": "",
    "idNo": "",
    "cellPhone": "840246472",
    "birthdate": "30780",
    "doe": "2024",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "10819 Thulare Str.",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Tsegofatso Makola",
    "postLevel": "",
    "position": "Caregiver",
    "permTemp": "Perm",
    "branch": "Mental&Disability ",
    "status": "",
    "idNo": "",
    "cellPhone": "792111504",
    "birthdate": "13/05/1992",
    "doe": "01/04/2025",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "6900 Semole Str. Mahube 24",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Boitumelo Ngobeni",
    "postLevel": "",
    "position": "Caregiver",
    "permTemp": "Perm",
    "branch": "Mental&Disability ",
    "status": "",
    "idNo": "",
    "cellPhone": "640344043",
    "birthdate": "30018",
    "doe": "",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "14931 Second Str Mmalodi ",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Rachel Molamodi",
    "postLevel": "",
    "position": "Caregiver",
    "permTemp": "Perm",
    "branch": "Mental&Disability ",
    "status": "",
    "idNo": "",
    "cellPhone": "762189400",
    "birthdate": "29468",
    "doe": "2022",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "28567 Ext 5 Nkomo Str.",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Joana Mashasha",
    "postLevel": "",
    "position": "Caregiver",
    "permTemp": "Perm",
    "branch": "Mental&Disability ",
    "status": "",
    "idNo": "",
    "cellPhone": "799452483",
    "birthdate": "20/09/1985",
    "doe": "01/01/2016",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "38433 16 Euginia Ave Ext 18",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Reneilwe  Phetla",
    "postLevel": "",
    "position": "Caregiver",
    "permTemp": "Perm",
    "branch": "Mental&Disability ",
    "status": "",
    "idNo": "",
    "cellPhone": "712367033",
    "birthdate": "",
    "doe": "",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Maggie Tema",
    "postLevel": "",
    "position": "Caregiver",
    "permTemp": "Perm",
    "branch": "Mental&Disability ",
    "status": "",
    "idNo": "",
    "cellPhone": "825850716",
    "birthdate": "14/06/1979",
    "doe": "01/04/2020",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "14206 Phiri Street",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Ellen Mokatse",
    "postLevel": "",
    "position": "General worker",
    "permTemp": "Perm",
    "branch": "Mental&Disability ",
    "status": "",
    "idNo": "",
    "cellPhone": "799415808",
    "birthdate": "26242",
    "doe": "01/01/2017",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "17534 Mamelodi East",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Matlakala Sebela",
    "postLevel": "",
    "position": "Caregiver",
    "permTemp": "Perm",
    "branch": "Mental&Disability ",
    "status": "",
    "idNo": "",
    "cellPhone": "818633200",
    "birthdate": "",
    "doe": "",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Joyce Chaane",
    "postLevel": "",
    "position": "Caregiver",
    "permTemp": "Perm",
    "branch": "Mental&Disability ",
    "status": "",
    "idNo": "",
    "cellPhone": "792766315",
    "birthdate": "23/07/1962",
    "doe": "14/02/2025",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "11474 Mmamelodi East",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Sr Rose Ngoetjana",
    "postLevel": "P1",
    "position": "Nursing Service Manager",
    "permTemp": "Perm",
    "branch": "Hospice ",
    "status": "Mamelodi",
    "idNo": "",
    "cellPhone": "Closed",
    "birthdate": "",
    "doe": "",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Sr Mashudu Ndzukulu",
    "postLevel": "P2",
    "position": "Professional Nurse",
    "permTemp": "Perm",
    "branch": "Hospice ",
    "status": "Mamelodi",
    "idNo": "",
    "cellPhone": "Open",
    "birthdate": "",
    "doe": "",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Sr Nompumemlo Ndebele",
    "postLevel": "P3",
    "position": "Professional Nurse",
    "permTemp": "Perm",
    "branch": "Hospice ",
    "status": "Mamelodi",
    "idNo": "",
    "cellPhone": "Closed",
    "birthdate": "",
    "doe": "",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "E/N Kgadi Nkosi",
    "postLevel": "P4",
    "position": "Enrolled Nurse",
    "permTemp": "Perm",
    "branch": "Hospice ",
    "status": "Mamelodi",
    "idNo": "",
    "cellPhone": "Open",
    "birthdate": "",
    "doe": "",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Thivhulani Muswuba",
    "postLevel": "P5",
    "position": "Auxiliary Nurse",
    "permTemp": "Perm",
    "branch": "Hospice ",
    "status": "Mamelodi",
    "idNo": "",
    "cellPhone": "Open",
    "birthdate": "",
    "doe": "",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Caroline Lebodi",
    "postLevel": "P5",
    "position": "Auxiliary Nurse",
    "permTemp": "Perm",
    "branch": "Hospice ",
    "status": "Mamelodi",
    "idNo": "",
    "cellPhone": "Open",
    "birthdate": "",
    "doe": "",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Pauline Nkuna",
    "postLevel": "P6",
    "position": "Finance Admin",
    "permTemp": "Perm",
    "branch": "Hospice ",
    "status": "Mamelodi",
    "idNo": "",
    "cellPhone": "Open",
    "birthdate": "",
    "doe": "",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Sebolelo Moloinyane",
    "postLevel": "P7",
    "position": "Caregiver",
    "permTemp": "Perm",
    "branch": "Hospice ",
    "status": "Mamelodi",
    "idNo": "",
    "cellPhone": "Open",
    "birthdate": "",
    "doe": "",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Mashudu Netshimboni",
    "postLevel": "P8",
    "position": "Caregiver",
    "permTemp": "Perm",
    "branch": "Hospice ",
    "status": "Mamelodi",
    "idNo": "",
    "cellPhone": "Open",
    "birthdate": "",
    "doe": "",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Virginia Masemola",
    "postLevel": "P9",
    "position": "Caregiver",
    "permTemp": "Perm",
    "branch": "Hospice ",
    "status": "Mamelodi",
    "idNo": "",
    "cellPhone": "Open",
    "birthdate": "",
    "doe": "",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Dikeledi Bali",
    "postLevel": "P10",
    "position": "Caregiver",
    "permTemp": "Perm",
    "branch": "Hospice ",
    "status": "Mamelodi",
    "idNo": "",
    "cellPhone": "Open",
    "birthdate": "",
    "doe": "",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Evelyn Pitsi",
    "postLevel": "P11",
    "position": "Caregiver",
    "permTemp": "Perm",
    "branch": "Hospice ",
    "status": "Mamelodi",
    "idNo": "",
    "cellPhone": "Open",
    "birthdate": "",
    "doe": "",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Sibongile Moswa",
    "postLevel": "P12",
    "position": "Caregiver",
    "permTemp": "Perm",
    "branch": "Hospice ",
    "status": "Mamelodi",
    "idNo": "",
    "cellPhone": "Open",
    "birthdate": "",
    "doe": "",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Blessmore Sixpence",
    "postLevel": "P13",
    "position": "Caregiver",
    "permTemp": "Perm",
    "branch": "Hospice ",
    "status": "Mamelodi",
    "idNo": "",
    "cellPhone": "Open",
    "birthdate": "",
    "doe": "",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Rahab Mamabolo",
    "postLevel": "P14",
    "position": "General wowrker",
    "permTemp": "Perm",
    "branch": "Hospice ",
    "status": "Mamelodi",
    "idNo": "",
    "cellPhone": "Open",
    "birthdate": "",
    "doe": "",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Brenda Zwane",
    "postLevel": "P15",
    "position": "General worker",
    "permTemp": "Perm",
    "branch": "Hospice ",
    "status": "Mamelodi",
    "idNo": "",
    "cellPhone": "Open",
    "birthdate": "",
    "doe": "",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Thobeka Dlamini",
    "postLevel": "P16",
    "position": "Counselor",
    "permTemp": "Perm",
    "branch": "Hospice ",
    "status": "Mamelodi",
    "idNo": "",
    "cellPhone": "Open",
    "birthdate": "",
    "doe": "",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Asnath Makhubela",
    "postLevel": "P17",
    "position": "Cooker",
    "permTemp": "Perm",
    "branch": "Hospice ",
    "status": "Mamelodi",
    "idNo": "",
    "cellPhone": "Open",
    "birthdate": "",
    "doe": "",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Goodness Sithole ",
    "postLevel": "P4",
    "position": "Property Manager ",
    "permTemp": "Perm",
    "branch": "Church ",
    "status": "Mamelodi",
    "idNo": "",
    "cellPhone": "678568249",
    "birthdate": "",
    "doe": "",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Duduzile Shabangu",
    "postLevel": "P3",
    "position": "Admin Staff",
    "permTemp": "Perm",
    "branch": "Church ",
    "status": "mamelodi",
    "idNo": "",
    "cellPhone": "662368629",
    "birthdate": "",
    "doe": "",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Albert Ndou",
    "postLevel": "P0",
    "position": "Security Personnel ",
    "permTemp": "Perm",
    "branch": "Church ",
    "status": "mamelodi",
    "idNo": "",
    "cellPhone": "826603855",
    "birthdate": "",
    "doe": "",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Mxolisi Dludlu",
    "postLevel": "P0",
    "position": "Security Personnel ",
    "permTemp": "Perm",
    "branch": "Church ",
    "status": "mamelodi",
    "idNo": "",
    "cellPhone": "715321594",
    "birthdate": "",
    "doe": "",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Katlego Tefu",
    "postLevel": "P0",
    "position": "Security Personnel ",
    "permTemp": "Perm",
    "branch": "Church ",
    "status": "mamelodi",
    "idNo": "",
    "cellPhone": "720192131",
    "birthdate": "",
    "doe": "",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Sidney Baloyi",
    "postLevel": "P0",
    "position": "Security Personnel ",
    "permTemp": "Perm",
    "branch": "Church ",
    "status": "mamelodi",
    "idNo": "",
    "cellPhone": "720884707",
    "birthdate": "",
    "doe": "",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Sidney Mmakau",
    "postLevel": "P0",
    "position": "Security Personnel ",
    "permTemp": "Perm",
    "branch": "Church ",
    "status": "mamelodi",
    "idNo": "",
    "cellPhone": "Open",
    "birthdate": "",
    "doe": "",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Godfrey Sekgodiso",
    "postLevel": "P0",
    "position": "Security Personnel ",
    "permTemp": "Perm",
    "branch": "Church ",
    "status": "mamelodi",
    "idNo": "",
    "cellPhone": "Open",
    "birthdate": "",
    "doe": "",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Sibongile Boshielo",
    "postLevel": "P0",
    "position": "Security Personnel ",
    "permTemp": "Perm",
    "branch": "Church ",
    "status": "mamelodi",
    "idNo": "",
    "cellPhone": "Open",
    "birthdate": "",
    "doe": "",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "",
    "salary": 0,
    "uifNumber": ""
  },
  {
    "name": "Gladys Malefane ",
    "postLevel": "P0",
    "position": "General Staff",
    "permTemp": "Perm",
    "branch": "Church ",
    "status": "",
    "idNo": "",
    "cellPhone": "Open",
    "birthdate": "",
    "doe": "",
    "taxNumber": "",
    "email": "",
    "bankAccNo": "",
    "address": "",
    "salary": 0,
    "uifNumber": ""
  }
];

        // Global variables
        let currentUser = null;
        let employees = JSON.parse(localStorage.getItem('employees')) || [];
        let payrolls = JSON.parse(localStorage.getItem('payrolls')) || [];
        let jobs = JSON.parse(localStorage.getItem('jobs')) || [];
        let reviews = JSON.parse(localStorage.getItem('reviews')) || [];
        let attendance = JSON.parse(localStorage.getItem('attendance')) || [];
        let leaves = JSON.parse(localStorage.getItem('leaves')) || [];
        let benefits = JSON.parse(localStorage.getItem('benefits')) || [];
        let courses = JSON.parse(localStorage.getItem('courses')) || [];
        let certifications = JSON.parse(localStorage.getItem('certifications')) || [];
        let media = JSON.parse(localStorage.getItem('media')) || [];
        let audit = JSON.parse(localStorage.getItem('audit')) || [];
        let notifications = JSON.parse(localStorage.getItem('notifications')) || [];
        let messages = JSON.parse(localStorage.getItem('messages')) || [];
        let claims = JSON.parse(localStorage.getItem('claims')) || [];
        let timeEntries = JSON.parse(localStorage.getItem('timeEntries')) || [];
        let wellnessResources = JSON.parse(localStorage.getItem('wellnessResources')) || [];
        let wellnessSurveys = JSON.parse(localStorage.getItem('wellnessSurveys')) || [];
        let dashboardChart = null;
        let myPerformanceChart = null;
        let myLeaveChart = null;
        let payrollTrendChart = null;
        let currentEditIndex = -1;
        let currentQuizCourseId = null;
        let currentClaimEdit = -1;
        let currentMessageEmpIndex = -1;
        let surveyQuestionCounter = 0;

        // Initialize employees with BCC data if empty
        if (employees.length === 0) {
            employees = bccEmployees.map((e, index) => ({ ...e, id: index + 1 }));
            localStorage.setItem('employees', JSON.stringify(employees));
        }

        // Sample data for other arrays
        if (payrolls.length === 0) {
            payrolls = employees.slice(0, 5).map((e, i) => ({
                id: i + 1,
                employeeIndex: i,
                period: '2025-11',
                gross: e.salary * 1.1,
                deductions: e.salary * 0.2,
                net: e.salary * 0.9,
                paye: e.salary * 0.15,
                uif: e.salary * 0.01,
                status: 'Processed'
            }));
            localStorage.setItem('payrolls', JSON.stringify(payrolls));
        }

        if (jobs.length === 0) {
            jobs = [
                { id: 1, title: 'Teacher', branch: 'Mamelodi', description: 'Teach math', applications: [] },
                { id: 2, title: 'Admin', branch: 'Mhlanga', description: 'Office work', applications: [] }
            ];
            localStorage.setItem('jobs', JSON.stringify(jobs));
        }

        if (reviews.length === 0) {
            reviews = employees.slice(0, 5).map((e, i) => ({
                id: i + 1,
                employeeIndex: i,
                date: '2025-11-01',
                score: Math.floor(Math.random() * 5) + 1,
                comments: 'Good performance'
            }));
            localStorage.setItem('reviews', JSON.stringify(reviews));
        }

        // Login function
        function login() {
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            if (username === 'admin' && password === 'admin123') {
                currentUser = { username: 'admin', role: 'admin', index: -1 };
                document.querySelectorAll('.admin-only').forEach(el => el.style.display = 'block');
            } else if (username === 'john' && password === 'john123') {
                currentUser = { username: 'john', role: 'employee', index: 0 }; // Assume first employee
                document.querySelectorAll('.employee-only').forEach(el => el.style.display = 'block');
                document.querySelectorAll('.admin-only').forEach(el => el.style.display = 'none');
            } else {
                alert('Invalid credentials');
                return;
            }
            localStorage.setItem('currentUser', JSON.stringify(currentUser));
            document.getElementById('loginPage').style.display = 'none';
            document.getElementById('appContainer').style.display = 'block';
            initApp();
            showSection('dashboard');
        }

        // Show section
        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(s => s.classList.add('d-none'));
            document.getElementById(sectionId).classList.remove('d-none');
            document.querySelectorAll('.nav-link').forEach(link => link.classList.remove('active'));
            document.querySelector(`a[href="#${sectionId}"]`).classList.add('active');
            // Render specific section
            if (sectionId === 'dashboard') renderDashboard();
            if (sectionId === 'myDashboard') renderMyDashboard();
            if (sectionId === 'employees') renderEmployees();
            if (sectionId === 'payroll') renderPayroll();
            if (sectionId === 'recruitment') renderJobs();
            if (sectionId === 'performance') renderPerformance();
            if (sectionId === 'attendance') renderAttendance();
            if (sectionId === 'leaves') renderLeaves();
            if (sectionId === 'benefits') renderBenefits();
            if (sectionId === 'training') renderCourses();
            if (sectionId === 'compliance') renderCertifications();
            if (sectionId === 'reports') renderReports();
            if (sectionId === 'audit') renderAudit();
            if (sectionId === 'mediaApproval') renderMedia();
            if (sectionId === 'myProfile') renderMyProfile();
            if (sectionId === 'myPayroll') renderMyPayroll();
            if (sectionId === 'openJobs') renderOpenJobs();
            if (sectionId === 'myWellness') renderMyWellness();
            if (sectionId === 'wellnessAdmin') renderWellnessAdmin();
            if (sectionId === 'myClaims') renderMyClaims();
            if (sectionId === 'myTimeEntry') renderMyTimeEntry();
            if (sectionId === 'inbox') renderInbox();
        }

        // Toggle sidebar
        function toggleSidebar() {
            const sidebar = document.querySelector('.sidebar');
            const content = document.querySelector('.content');
            const toggleBtn = document.querySelector('.btn-toggle-sidebar');
            sidebar.classList.toggle('collapsed');
            content.classList.toggle('expanded');
            toggleBtn.classList.toggle('expanded');
        }

        // Logout
        function logout() {
            localStorage.removeItem('currentUser');
            document.getElementById('appContainer').style.display = 'none';
            document.getElementById('loginPage').style.display = 'flex';
            currentUser = null;
            document.querySelectorAll('.admin-only').forEach(el => el.style.display = 'block');
            document.querySelectorAll('.employee-only').forEach(el => el.style.display = 'none');
        }

        // Render Dashboard
        function renderDashboard() {
            document.getElementById('totalEmployees').textContent = employees.length;
            document.getElementById('openPositions').textContent = jobs.length;
            const avgPerf = reviews.length ? (reviews.reduce((sum, r) => sum + r.score, 0) / reviews.length).toFixed(1) : 0;
            document.getElementById('avgPerformance').textContent = `${avgPerf}/5`;
            document.getElementById('pendingLeaves').textContent = leaves.filter(l => l.status === 'Pending').length;
            document.getElementById('complianceScore').textContent = '85%';
            document.getElementById('expiringCerts').textContent = certifications.filter(c => new Date(c.expiryDate) < new Date('2025-12-01')).length;
            const totalPayroll = payrolls.reduce((sum, p) => sum + p.net, 0);
            document.getElementById('totalPayrollCost').textContent = `R${totalPayroll.toFixed(2)}`;
            const avgSalary = employees.length ? (employees.reduce((sum, e) => sum + e.salary, 0) / employees.length).toFixed(0) : 0;
            document.getElementById('avgSalary').textContent = `R${avgSalary}`;
            const ctx = document.getElementById('dashboardChart').getContext('2d');
            if (dashboardChart) dashboardChart.destroy();
            dashboardChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Employees', 'Open Positions', 'Avg Performance', 'Pending Leaves', 'Compliance %'],
                    datasets: [{ 
                        label: 'HR Metrics', 
                        data: [employees.length, jobs.length, avgPerf, leaves.filter(l => l.status === 'Pending').length, 85],
                        backgroundColor: ['#4169e1', '#87ceeb', '#add8e6', '#b0e0e6', '#e6f3ff']
                    }]
                },
                options: { responsive: true }
            });
        }

        // Render My Dashboard
        function renderMyDashboard() {
            if (!currentUser || currentUser.role !== 'employee') return;
            const userIndex = currentUser.index;
            const emp = employees[userIndex];
            document.getElementById('myName').textContent = emp.name;
            const myReviews = reviews.filter(r => r.employeeIndex === userIndex);
            const myAvg = myReviews.length ? (myReviews.reduce((sum, r) => sum + r.score, 0) / myReviews.length).toFixed(1) : 0;
            document.getElementById('myAvgPerformance').textContent = `${myAvg}/5`;
            const myRecentP = payrolls.filter(p => p.employeeIndex === userIndex).slice(-1)[0];
            document.getElementById('recentPayslips').textContent = myRecentP ? `Last: ${myRecentP.period} - R${myRecentP.net.toFixed(2)}` : 'No recent payslips';
            const perfCtx = document.getElementById('myPerformanceChart').getContext('2d');
            if (myPerformanceChart) myPerformanceChart.destroy();
            myPerformanceChart = new Chart(perfCtx, { type: 'doughnut', data: { labels: ['Performance'], datasets: [{ data: [myAvg * 20], backgroundColor: ['#4169e1'] }] } });
            const leaveCtx = document.getElementById('myLeaveChart').getContext('2d');
            const myLeaves = leaves.filter(l => l.employeeIndex === userIndex);
            const approved = myLeaves.filter(l => l.status === 'Approved').length;
            const pending = myLeaves.filter(l => l.status === 'Pending').length;
            if (myLeaveChart) myLeaveChart.destroy();
            myLeaveChart = new Chart(leaveCtx, { type: 'pie', data: { labels: ['Approved', 'Pending'], datasets: [{ data: [approved, pending], backgroundColor: ['#28a745', '#ffc107'] }] } });
        }

        // Render Employees
        function renderEmployees() {
            document.getElementById('employeeTable').innerHTML = employees.map((e, i) => `
                <tr>
                    <td>${e.id}</td>
                    <td>${e.name}</td>
                    <td>${e.postLevel}</td>
                    <td>${e.position}</td>
                    <td>${e.branch}</td>
                    <td>${e.status}</td>
                    <td>${e.idNo}</td>
                    <td>${e.cellPhone}</td>
                    <td>${e.email}</td>
                    <td>${e.taxNumber}</td>
                    <td>${e.bankAccNo}</td>
                    <td>${e.address}</td>
                    <td>R${e.salary.toLocaleString()}</td>
                    <td>${e.uifNumber}</td>
                    <td>
                        <button class="btn btn-sm btn-primary me-1" onclick="editEmployee(${i})">Edit</button>
                        <button class="btn btn-sm btn-danger" onclick="deleteEmployee(${i})">Delete</button>
                    </td>
                </tr>
            `).join('');
        }

        // Employee functions
        function showAddEmployeeModal(editIndex = -1) {
            if (editIndex > -1) {
                const e = employees[editIndex];
                document.getElementById('empName').value = e.name || '';
                document.getElementById('postLevel').value = e.postLevel || '';
                document.getElementById('empPosition').value = e.position || '';
                document.getElementById('permTemp').value = e.permTemp || 'Perm';
                document.getElementById('empBranch').value = e.branch || '';
                document.getElementById('empStatus').value = e.status || 'Open';
                document.getElementById('idNo').value = e.idNo || '';
                document.getElementById('cellPhone').value = e.cellPhone || '';
                document.getElementById('birthdate').value = e.birthdate || '';
                document.getElementById('doe').value = e.doe || '';
                document.getElementById('taxNumber').value = e.taxNumber || '';
                document.getElementById('salary').value = e.salary || 0;
                document.getElementById('email').value = e.email || '';
                document.getElementById('uifNumber').value = e.uifNumber || '';
                document.getElementById('bankAccNo').value = e.bankAccNo || '';
                document.getElementById('address').value = e.address || '';
            } else {
                document.getElementById('employeeForm').reset();
            }
            currentEditIndex = editIndex;
            const modal = new bootstrap.Modal(document.getElementById('addEmployeeModal'));
            modal.show();
        }

        function saveEmployee() {
            const empData = {
                name: document.getElementById('empName').value,
                postLevel: document.getElementById('postLevel').value,
                position: document.getElementById('empPosition').value,
                permTemp: document.getElementById('permTemp').value,
                branch: document.getElementById('empBranch').value,
                status: document.getElementById('empStatus').value,
                idNo: document.getElementById('idNo').value,
                cellPhone: document.getElementById('cellPhone').value,
                birthdate: document.getElementById('birthdate').value,
                doe: document.getElementById('doe').value,
                taxNumber: document.getElementById('taxNumber').value,
                salary: parseFloat(document.getElementById('salary').value) || 0,
                email: document.getElementById('email').value,
                uifNumber: document.getElementById('uifNumber').value,
                bankAccNo: document.getElementById('bankAccNo').value,
                address: document.getElementById('address').value
            };
            if (currentEditIndex > -1) {
                employees[currentEditIndex] = { ...employees[currentEditIndex], ...empData };
            } else {
                empData.id = employees.length + 1;
                employees.push(empData);
            }
            localStorage.setItem('employees', JSON.stringify(employees));
            renderEmployees();
            bootstrap.Modal.getInstance(document.getElementById('addEmployeeModal')).hide();
        }

        function editEmployee(index) {
            showAddEmployeeModal(index);
        }

        function deleteEmployee(index) {
            if (confirm('Delete this employee?')) {
                employees.splice(index, 1);
                localStorage.setItem('employees', JSON.stringify(employees));
                renderEmployees();
            }
        }

        // Render Payroll
        function renderPayroll() {
            document.getElementById('payrollTable').innerHTML = payrolls.map((p, i) => `
                <tr>
                    <td>${p.id}</td>
                    <td>${employees[p.employeeIndex]?.name || 'Unknown'}</td>
                    <td>${p.period}</td>
                    <td>R${p.gross.toFixed(2)}</td>
                    <td>R${p.deductions.toFixed(2)}</td>
                    <td>R${p.net.toFixed(2)}</td>
                    <td>${p.status}</td>
                    <td>${p.paye ? 'Compliant' : 'Pending'}</td>
                    <td><button class="btn btn-sm btn-info" onclick="viewTaxLiability(${p.employeeIndex})">View Tax</button></td>
                </tr>
            `).join('');
            const totalYTD = payrolls.reduce((sum, p) => sum + p.net, 0);
            document.getElementById('ytdPayroll').textContent = `R${totalYTD.toFixed(2)}`;
            document.getElementById('pendingPayrollRuns').textContent = payrolls.filter(p => p.status === 'Pending').length;
            const ctx = document.getElementById('payrollTrendChart').getContext('2d');
            if (payrollTrendChart) payrollTrendChart.destroy();
            payrollTrendChart = new Chart(ctx, { type: 'line', data: { labels: payrolls.map(p => p.period), datasets: [{ label: 'Net Pay', data: payrolls.map(p => p.net), borderColor: '#4169e1' }] }, options: { responsive: true } });
        }

        // Render Jobs
        function renderJobs() {
            document.getElementById('jobTable').innerHTML = jobs.map(j => `
                <tr>
                    <td>${j.id}</td>
                    <td>${j.title}</td>
                    <td>${j.branch}</td>
                    <td>${j.applications.length}</td>
                    <td><button class="btn btn-sm btn-primary" onclick="editJob(${j.id})">Edit</button></td>
                </tr>
            `).join('');
        }

        // Render Performance
        function renderPerformance() {
            document.getElementById('performanceTable').innerHTML = reviews.map(r => `
                <tr>
                    <td>${employees[r.employeeIndex]?.name || 'Unknown'}</td>
                    <td>${r.date}</td>
                    <td>${r.score}</td>
                    <td>${r.comments}</td>
                    <td class="admin-only"><button class="btn btn-sm btn-danger" onclick="deleteReview(${r.id})">Delete</button></td>
                </tr>
            `).join('');
        }

        // Render Attendance
        function renderAttendance() {
            document.getElementById('attendanceTable').innerHTML = attendance.map(a => `
                <tr>
                    <td>${employees[a.employeeIndex]?.name || 'Unknown'}</td>
                    <td>${a.date}</td>
                    <td>${a.hours}</td>
                    <td>${a.overtime}</td>
                    <td>${a.status}</td>
                    <td class="admin-only"><button class="btn btn-sm btn-danger" onclick="deleteAttendance(${a.id})">Delete</button></td>
                </tr>
            `).join('');
        }

        // Render Leaves
        function renderLeaves() {
            document.getElementById('leavesTable').innerHTML = leaves.map(l => `
                <tr>
                    <td>${employees[l.employeeIndex]?.name || 'Unknown'}</td>
                    <td>${l.startDate}</td>
                    <td>${l.endDate}</td>
                    <td>${l.type}</td>
                    <td>${l.status}</td>
                    <td><button class="btn btn-sm btn-info" onclick="approveLeave(${l.id})">${l.status === 'Pending' ? 'Approve' : 'View'}</button></td>
                </tr>
            `).join('');
        }

        // Render Benefits
        function renderBenefits() {
            document.getElementById('benefitTable').innerHTML = benefits.map(b => `
                <tr>
                    <td>${b.id}</td>
                    <td>${b.name}</td>
                    <td>${b.description}</td>
                    <td>R${b.cost}</td>
                    <td><button class="btn btn-sm btn-danger" onclick="deleteBenefit(${b.id})">Delete</button></td>
                </tr>
            `).join('');
        }

        // Render Courses
        function renderCourses() {
            document.getElementById('courseTable').innerHTML = courses.map(c => `
                <tr>
                    <td>${c.id}</td>
                    <td>${c.name}</td>
                    <td>${c.description}</td>
                    <td><button class="btn btn-sm btn-primary" onclick="startQuiz(${c.id})">Quiz</button></td>
                </tr>
            `).join('');
        }

        // Render Certifications
        function renderCertifications() {
            document.getElementById('certificationTable').innerHTML = certifications.map(c => `
                <tr>
                    <td>${employees[c.employeeIndex]?.name || 'Unknown'}</td>
                    <td>${c.name}</td>
                    <td>${c.expiryDate}</td>
                    <td><button class="btn btn-sm btn-danger" onclick="deleteCertification(${c.id})">Delete</button></td>
                </tr>
            `).join('');
        }

        // Render Reports
        function renderReports() {
            // Placeholder
        }

        // Render Audit
        function renderAudit() {
            document.getElementById('auditTable').innerHTML = audit.map(a => `
                <tr>
                    <td>${a.time}</td>
                    <td>${a.user}</td>
                    <td>${a.action}</td>
                    <td>${a.details}</td>
                </tr>
            `).join('');
        }

        // Render Media
        function renderMedia() {
            document.getElementById('mediaTable').innerHTML = media.map(m => `
                <tr>
                    <td>${m.id}</td>
                    <td>${m.title}</td>
                    <td>${m.uploader}</td>
                    <td>${m.status}</td>
                    <td><button class="btn btn-sm btn-primary" onclick="approveMedia(${m.id})">Approve</button></td>
                </tr>
            `).join('');
        }

        // Render My Profile
        function renderMyProfile() {
            if (!currentUser || currentUser.role !== 'employee') return;
            const userIndex = currentUser.index;
            const emp = employees[userIndex];
            document.getElementById('profileName').textContent = emp.name;
            document.getElementById('profilePic').src = emp.photo || 'https://via.placeholder.com/150';
            document.getElementById('profileDetails').innerHTML = `
                <div class="row">
                    <div class="col-md-6">
                        <p><strong>Position:</strong> ${emp.position}</p>
                        <p><strong>Branch:</strong> ${emp.branch}</p>
                        <p><strong>Email:</strong> ${emp.email}</p>
                        <p><strong>Phone:</strong> ${emp.cellPhone}</p>
                    </div>
                    <div class="col-md-6">
                        <p><strong>Salary:</strong> R${emp.salary}</p>
                        <p><strong>Tax #:</strong> ${emp.taxNumber}</p>
                        <p><strong>UIF #:</strong> ${emp.uifNumber}</p>
                        <p><strong>Address:</strong> ${emp.address}</p>
                    </div>
                </div>
            `;
        }

        // Render My Payroll
        function renderMyPayroll() {
            if (!currentUser || currentUser.role !== 'employee') return;
            const userIndex = currentUser.index;
            document.getElementById('myPayrollTable').innerHTML = payrolls.filter(p => p.employeeIndex === userIndex).map(p => `
                <tr>
                    <td>${p.period}</td>
                    <td>R${p.gross.toFixed(2)}</td>
                    <td>R${p.deductions.toFixed(2)}</td>
                    <td>R${p.net.toFixed(2)}</td>
                    <td><button class="btn btn-sm btn-info" onclick="viewPayslip(${p.id})">View</button></td>
                </tr>
            `).join('');
        }

        // Render Open Jobs
        function renderOpenJobs() {
            if (!currentUser || currentUser.role !== 'employee') return;
            const userIndex = currentUser.index;
            document.getElementById('openJobTable').innerHTML = jobs.map(j => {
                const applied = j.applications.includes(userIndex);
                return `
                    <tr>
                        <td>${j.title}</td>
                        <td>${j.branch}</td>
                        <td>${j.description}</td>
                        <td>${applied ? 'Applied' : 'Open'}</td>
                        <td>
                            <button class="btn btn-sm ${applied ? 'btn-secondary disabled' : 'btn-primary'}" onclick="applyJob(${j.id})" ${applied ? 'disabled' : ''}>${applied ? 'Applied' : 'Apply'}</button>
                        </td>
                    </tr>
                `;
            }).join('');
        }

        // Render Wellness Admin
        function renderWellnessAdmin() {
            // Placeholder implementation
            const avgScore = employees.length ? (employees.reduce((sum, e) => sum + (e.wellness?.score || 0), 0) / employees.length).toFixed(1) : 0;
            // Add more as per original
        }

        // Render My Wellness
        function renderMyWellness() {
            // Placeholder
        }

        // Render My Claims
        function renderMyClaims() {
            if (!currentUser || currentUser.role !== 'employee') return;
            const userIndex = currentUser.index;
            document.getElementById('claimsTable').innerHTML = claims.filter(c => c.employeeIndex === userIndex).map((c, i) => `
                <tr>
                    <td>${c.id}</td>
                    <td>${c.type}</td>
                    <td>R${c.amount.toFixed(2)}</td>
                    <td>${c.status}</td>
                    <td>${c.submittedDate}</td>
                    <td>
                        <button class="btn btn-sm btn-primary" onclick="showSubmitClaimModal(${i})">Edit</button>
                        <button class="btn btn-sm btn-danger" onclick="deleteClaim(${i})">Delete</button>
                    </td>
                </tr>
            `).join('');
        }

        // Render My Time Entry
        function renderMyTimeEntry() {
            if (!currentUser || currentUser.role !== 'employee') return;
            const userIndex = currentUser.index;
            document.getElementById('timeEntryTable').innerHTML = timeEntries.filter(t => t.employeeIndex === userIndex).map((t, i) => `
                <tr>
                    <td>${t.date}</td>
                    <td>${t.hoursWorked}</td>
                    <td>${t.overtime}</td>
                    <td>${t.status}</td>
                    <td>
                        <button class="btn btn-sm btn-danger" onclick="deleteTimeEntry(${i})">Delete</button>
                    </td>
                </tr>
            `).join('');
        }

        // Render Inbox
        function renderInbox() {
            if (!currentUser || currentUser.role !== 'employee') return;
            const userIndex = currentUser.index;
            document.getElementById('inboxTable').innerHTML = messages.filter(m => m.to === userIndex).map(m => `
                <tr>
                    <td>${m.from}</td>
                    <td>${m.message}</td>
                    <td>${m.date}</td>
                </tr>
            `).join('');
        }

        // Basic implementations for other functions
        function previewBatchPayroll() {
            // Placeholder
            document.getElementById('batchPreview').innerHTML = '<p>Preview placeholder</p>';
            document.getElementById('batchPreview').style.display = 'block';
        }

        function runBatchPayroll() {
            alert('Payroll processed');
        }

        function showAddPayrollModal() {
            // Placeholder modal
            alert('Add payroll modal');
        }

        function generatePayrollReport() {
            exportToExcel(payrolls, 'payroll-report');
        }

        function exportPayrollToSARS() {
            alert('Exported to SARS');
        }

        function showAddJobModal() {
            alert('Add job modal');
        }

        function showAddReviewModal() {
            alert('Add review modal');
        }

        function clockIn() {
            alert('Clocked in');
        }

        function showAddLeaveModal() {
            alert('Leave request modal');
        }

        function showAddBenefitModal() {
            alert('Add benefit modal');
        }

        function showAddCourseModal() {
            alert('Add course modal');
        }

        function showAddCertificationModal() {
            alert('Add certification modal');
        }

        function exportToExcel(data, filename) {
            const ws = XLSX.utils.json_to_sheet(data);
            const wb = XLSX.utils.book_new();
            XLSX.utils.book_append_sheet(wb, ws, 'Data');
            XLSX.writeFile(wb, `${filename}.xlsx`);
        }

        function exportWellnessReport() {
            // Placeholder
            exportToExcel(employees.map(e => ({ name: e.name, wellnessScore: e.wellness?.score || 0 })), 'wellness-report');
        }

        function saveSettings() {
            // Placeholder
        }

        function toggleDarkMode(enabled) {
            document.body.classList.toggle('dark-mode', enabled);
            localStorage.setItem('darkMode', enabled);
        }

        function showUploadMediaModal() {
            alert('Upload media modal');
        }

        function showUploadHandbookModal() {
            alert('Upload handbook modal');
        }

        // Quiz functions
        function startQuiz(courseId) {
            // Placeholder
            alert('Quiz started for course ' + courseId);
        }

        function submitQuiz() {
            alert('Quiz submitted');
        }

        // Job application
        function applyJob(id) {
            const userIndex = currentUser.index;
            const job = jobs.find(j => j.id === id);
            if (job && !job.applications.includes(userIndex)) {
                job.applications.push(userIndex);
                localStorage.setItem('jobs', JSON.stringify(jobs));
                alert('Applied successfully');
                renderOpenJobs();
            }
        }

        // Add notification
        function addNotification(to, message) {
            const notif = { id: Date.now(), to, message, date: new Date().toLocaleString(), read: false };
            notifications.push(notif);
            localStorage.setItem('notifications', JSON.stringify(notifications));
            if (document.getElementById('notificationBadge')) {
                document.getElementById('notificationBadge').textContent = notifications.filter(n => !n.read).length;
                document.getElementById('notificationBadge').style.display = 'block';
            }
        }

        // Init app
        function initApp() {
            // Load dark mode
            const darkMode = localStorage.getItem('darkMode') === 'true';
            document.getElementById('darkModeSwitch').checked = darkMode;
            toggleDarkMode(darkMode);
            // Render notifications
            document.getElementById('notificationList').innerHTML = notifications.map(n => `<li>${n.message} - ${n.date}</li>`).join('');
            document.getElementById('notificationBadge').textContent = notifications.filter(n => !n.read).length;
            if (document.getElementById('notificationBadge').textContent === '0') {
                document.getElementById('notificationBadge').style.display = 'none';
            }
            // Render initial section
            showSection('dashboard');
        }

        // DOM ready
        document.addEventListener('DOMContentLoaded', () => {
            if (localStorage.getItem('currentUser')) {
                currentUser = JSON.parse(localStorage.getItem('currentUser'));
                if (currentUser.role === 'admin') {
                    document.querySelectorAll('.admin-only').forEach(el => el.style.display = 'block');
                } else if (currentUser.role === 'employee') {
                    document.querySelectorAll('.employee-only').forEach(el => el.style.display = 'block');
                    document.querySelectorAll('.admin-only').forEach(el => el.style.display = 'none');
                }
                document.getElementById('loginPage').style.display = 'none';
                document.getElementById('appContainer').style.display = 'block';
                initApp();
            }
        });
    </script>
</body>
</html>
